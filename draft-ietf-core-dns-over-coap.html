<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>DNS over CoAP (DoC)</title>
<meta content="Martine Sophie Lenders" name="author">
<meta content="Christian Amsüss" name="author">
<meta content="Cenk Gündoğan" name="author">
<meta content="Thomas C. Schmidt" name="author">
<meta content="Matthias Wählisch" name="author">
<meta content="
       This document defines a protocol for exchanging DNS queries (OPCODE 0) over the
Constrained Application Protocol (CoAP). These CoAP messages can be protected
by (D)TLS-Secured CoAP (CoAPS) or Object Security for Constrained RESTful
Environments (OSCORE) to provide encrypted DNS message exchange for
constrained devices in the Internet of Things (IoT). 
    " name="description">
<meta content="xml2rfc 3.30.0" name="generator">
<meta content="Internet-Draft" name="keyword">
<meta content="CoRE" name="keyword">
<meta content="CoAP" name="keyword">
<meta content="DNS" name="keyword">
<meta content="draft-ietf-core-dns-over-coap-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.30.0
    Python 3.12.11
    ConfigArgParse 1.7
    google-i18n-address 3.1.1
    intervaltree 3.1.0
    Jinja2 3.1.6
    lxml 5.3.1
    platformdirs 4.3.8
    pycountry 24.6.1
    PyYAML 6.0.2
    requests 2.32.4
    setuptools 80.9.0
    wcwidth 0.2.13
-->
<link href="draft-ietf-core-dns-over-coap.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-cyrillic.woff2') format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-greek.woff2') format('woff2');
  unicode-range: U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-greek.woff2') format('woff2');
  unicode-range: U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  --font-title: "Sofia Sans Semi Condensed", sans-serif;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
section {
  clear: both;
}
.section-number {
  padding-right: 0.5em;
}
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-title);
  font-weight: 680;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
  vertical-align: top;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
  & :is(ol, ul) {
    margin-left: 1em;
  }
}
li {
  margin: 0 0 0.25em 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
  & li {
    margin-top: 0.5em;
  }
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  margin: 0 0 0 2em;
  & li {
    margin: 0;
    & :first-child { margin-top: 0; }
    & :last-child { margin-bottom: 0; }
  }
}

/* definition lists */
dl {
  clear: left;
  --indent: 3ch;
  /* --indent: attr(indent ch); not supported in any browser, but we can dream */
  &.olPercent {
    --indent: 5ch;
    & > dt {
      min-width: calc(var(--indent) - 2ch);
    }
  }
  &.olPercent > dt {
    float: none;
  }

  dl > dd > & {
    margin-top: 0.5em;
    margin-bottom: 0;
  }
}
dl:not(.dlNewline) > dt {
  float: left;
  margin-right: 2ch;
  min-width: 8ch;
}
dl > dd {
  margin-bottom: .8em;
  margin-left: var(--indent) !important; /* stupid element overrides */
  min-height: 2ex;
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0;
  & > :is(:first-child, .break:first-child + *) {
    margin-top: 0;
  }
  & > :is(:last-child) {
    margin-bottom: 0;
  }
}
:is(dd, span).break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href] {
  color: var(--link-color);
}
a[href].selfRef, .iref + a[href].internal {
  color: var(--text-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref:is(.cite, .auto), :is(#status-of-memo, #copyright) a {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines
     note: this fails if these blocks take an entire line,
     a different solution would be great */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
  caption-side: bottom;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    /* In the horizontal direction, sometimes people make over-sized figures.
       Scrollbars for those is therefore necessary: auto adds them as necessary..
       In the vertical direction, the line-height can combine with the font
       asender/descender height to produce scrollbars: hidden avoids that. */
    overflow: auto hidden;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: auto;
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
  &[href] {
    color: var(--pilcrow-weak);
    &:hover { text-decoration: none; }
  }
}
@media not print {
  :hover > a.pilcrow {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: var(--small-font-size);
}
.role {
  font-variant: all-small-caps;
}
sub, sup {
  line-height: 1;
  font-size: 80%;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 15ch;
  & dt {
    width: var(--identifier-width);
    min-width: var(--identifier-width);
    clear: left;
    float: left;
    text-align: right;
    margin-right: 1ch;
  }
  & dd {
    margin: 0;
    margin-left: calc(1em + var(--identifier-width)) !important;
    min-width: 5em;
  }
  & .authors {
    & .author {
      display: inline-block;
      margin-right: 1.5em;
    }
    & .org {
      font-style: italic;
    }
  }
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;

  & nav {
    & ul {
      margin: 0 0.5em 0 0;
      padding: 0;
      list-style: none;
    }
    & li {
      line-height: 1.3em;
      margin: 2px 0;
      padding-left: 1.2em;
      text-indent: -1.2em;
    }
  }
  & a.xref {
    white-space: normal;
  }
}

.references {
  & > dt {
    text-align: right;
    font-weight: bold;
    min-width: 10ch;
    margin-right: 1.5ch;
    &:target::before {
      content: "⇒";
      margin: 0 10px 0 -25px;
    }
  }
  & > dd {
    margin-left: 12ch !important;
    overflow: visible;
    & .refInstance {
      margin-bottom: 0.8em;
    }
    & .ascii {
      margin-bottom: 0.25em;
    }
  }
}

#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  max-width: 20em;
  margin: 1em auto 1em 0;

  & .nameRole {
    font-weight: 700;
    margin-left: 0;
  }
  & .label {
    margin: 0.5em 0;
  }
  & .type {
    display: none;
  }
  & .alternative-contact {
    margin: 0.5em 0 0.25em 0;
  }
  & .non-ascii {
    margin: 0 0 0 2em;
  }
  & div.left {
    text-align: left;
  }
  & div.right {
    text-align: right;
  }
}

hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

/* Comments */
.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}

@media screen {
  #toc nav {
    font-family: var(--font-title);
    font-weight: 360;
    & > ul { margin-bottom: 2em; }
    & ul {
      margin: 0 0 0 4px;
      & :is(p, li) {
        margin: 2px 0;
      }
    }
  }
  #toc a.toplink {
    float: right;
  }
}
@media not screen {
  #toc a.toplink {
    display: none;
  }
}


/* TOC layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 1px 0 0 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
    &::before { /* css hamburger */
      float: right;
      position: relative;
      width: 1em;
      height: 1px;
      left: -164px;
      margin: 8px 0 0 0;
      background: white none repeat scroll 0 0;
      box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
      content: "";
    }
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active {
    opacity: 1;
    & nav { display: block; }
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:is(:link, :focus, :hover),
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin: 2px 0.5em 0;
  }
}

/* TOC layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
  #toc a.toplink {
    margin: 8px 0.5em 0;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre, .vcard {
    page-break-inside: avoid;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  :is(h2, h3, h4, h5, h6)+*, dd {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([fill="white"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">DoC</td>
<td class="right">August 2025</td>
</tr></thead>
<tfoot><tr>
<td class="left">Lenders, et al.</td>
<td class="center">Expires 2 March 2026</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">CoRE</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-core-dns-over-coap-latest</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2025-08-29" class="published">29 August 2025</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2026-03-02">2 March 2026</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">M. S. Lenders</div>
<div class="org">TU Dresden</div>
</div>
<div class="author">
      <div class="author-name">C. Amsüss</div>
</div>
<div class="author">
      <div class="author-name">C. Gündoğan</div>
<div class="org">NeuralAgent GmbH</div>
</div>
<div class="author">
      <div class="author-name">T. C. Schmidt</div>
<div class="org">HAW Hamburg</div>
</div>
<div class="author">
      <div class="author-name">M. Wählisch</div>
<div class="org">TU Dresden &amp; Barkhausen Institut</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">DNS over CoAP (DoC)</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document defines a protocol for exchanging DNS queries (OPCODE 0) over the
Constrained Application Protocol (CoAP). These CoAP messages can be protected
by (D)TLS-Secured CoAP (CoAPS) or Object Security for Constrained RESTful
Environments (OSCORE) to provide encrypted DNS message exchange for
constrained devices in the Internet of Things (IoT).<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<section class="note rfcEditorRemove" id="section-note.1">
      <h2 id="name-about-this-document">
<a href="#name-about-this-document" class="section-name selfRef">About This Document</a>
      </h2>
<p id="section-note.1-1">This note is to be removed before publishing as an RFC.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">
        The latest revision of this draft can be found at <span><a href="https://core-wg.github.io/draft-dns-over-coap/draft-ietf-core-dns-over-coap.html">https://core-wg.github.io/draft-dns-over-coap/draft-ietf-core-dns-over-coap.html</a></span>.
        Status information for this document may be found at <span><a href="https://datatracker.ietf.org/doc/draft-ietf-core-dns-over-coap/">https://datatracker.ietf.org/doc/draft-ietf-core-dns-over-coap/</a></span>.<a href="#section-note.1-2" class="pilcrow">¶</a></p>
<p id="section-note.1-3">
        Discussion of this document takes place on the
        CoRE Working Group mailing list (<span><a href="mailto:core@ietf.org">mailto:core@ietf.org</a></span>),
        which is archived at <span><a href="https://mailarchive.ietf.org/arch/browse/core/">https://mailarchive.ietf.org/arch/browse/core/</a></span>.
        Subscribe at <span><a href="https://www.ietf.org/mailman/listinfo/core/">https://www.ietf.org/mailman/listinfo/core/</a></span>.<a href="#section-note.1-3" class="pilcrow">¶</a></p>
<p id="section-note.1-4">Source for this draft and an issue tracker can be found at
        <span><a href="https://github.com/core-wg/draft-dns-over-coap">https://github.com/core-wg/draft-dns-over-coap</a></span>.<a href="#section-note.1-4" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 2 March 2026.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2025 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-terminology-and-conventions" class="internal xref">Terminology and Conventions</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-selection-of-a-doc-server" class="internal xref">Selection of a DoC Server</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1" class="keepWithNext"><a href="#section-3.1" class="auto internal xref">3.1</a>.  <a href="#name-discovery-by-resource-type" class="internal xref">Discovery by Resource Type</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="auto internal xref">3.2</a>.  <a href="#name-discovery-using-svcb-resour" class="internal xref">Discovery using SVCB Resource Records or DNR</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2.2.1">
                    <p id="section-toc.1-1.3.2.2.2.1.1"><a href="#section-3.2.1" class="auto internal xref">3.2.1</a>.  <a href="#name-examples" class="internal xref">Examples</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-basic-message-exchange" class="internal xref">Basic Message Exchange</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.  <a href="#name-the-application-dns-message" class="internal xref">The "application/dns-message" Content-Format</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="auto internal xref">4.2</a>.  <a href="#name-dns-queries-in-coap-request" class="internal xref">DNS Queries in CoAP Requests</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.1">
                    <p id="section-toc.1-1.4.2.2.2.1.1"><a href="#section-4.2.1" class="auto internal xref">4.2.1</a>.  <a href="#name-request-format" class="internal xref">Request Format</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.2">
                    <p id="section-toc.1-1.4.2.2.2.2.1"><a href="#section-4.2.2" class="auto internal xref">4.2.2</a>.  <a href="#name-support-of-coap-caching" class="internal xref">Support of CoAP Caching</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.3">
                    <p id="section-toc.1-1.4.2.2.2.3.1"><a href="#section-4.2.3" class="auto internal xref">4.2.3</a>.  <a href="#name-example" class="internal xref">Example</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="auto internal xref">4.3</a>.  <a href="#name-dns-responses-in-coap-respo" class="internal xref">DNS Responses in CoAP Responses</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3.2.1">
                    <p id="section-toc.1-1.4.2.3.2.1.1"><a href="#section-4.3.1" class="auto internal xref">4.3.1</a>.  <a href="#name-response-codes-and-handling" class="internal xref">Response Codes and Handling DNS and CoAP errors</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3.2.2">
                    <p id="section-toc.1-1.4.2.3.2.2.1"><a href="#section-4.3.2" class="auto internal xref">4.3.2</a>.  <a href="#name-support-of-coap-caching-2" class="internal xref">Support of CoAP Caching</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3.2.3">
                    <p id="section-toc.1-1.4.2.3.2.3.1"><a href="#section-4.3.3" class="auto internal xref">4.3.3</a>.  <a href="#name-examples-2" class="internal xref">Examples</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-interaction-with-other-coap" class="internal xref">Interaction with other CoAP and CoRE Features</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="auto internal xref">5.1</a>.  <a href="#name-dns-push-notifications-and-" class="internal xref">DNS Push Notifications and CoAP Observe</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="auto internal xref">5.2</a>.  <a href="#name-oscore" class="internal xref">OSCORE</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="auto internal xref">5.3</a>.  <a href="#name-mapping-doc-to-doh" class="internal xref">Mapping DoC to DoH</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-considerations-for-unprotec" class="internal xref">Considerations for Unprotected Use</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-implementation-status" class="internal xref">Implementation Status</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="auto internal xref">7.1</a>.  <a href="#name-doc-client" class="internal xref">DoC Client</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="auto internal xref">7.2</a>.  <a href="#name-doc-server" class="internal xref">DoC Server</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.  <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="auto internal xref">9.1</a>.  <a href="#name-coap-content-formats-regist" class="internal xref">CoAP Content-Formats Registry</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="auto internal xref">9.2</a>.  <a href="#name-dns-service-bindings-svcb-r" class="internal xref">DNS Service Bindings (SVCB) Registry</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.3">
                <p id="section-toc.1-1.9.2.3.1"><a href="#section-9.3" class="auto internal xref">9.3</a>.  <a href="#name-resource-type-rt-link-targe" class="internal xref">Resource Type (rt=) Link Target Attribute Values Registry</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="auto internal xref">10</a>. <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="auto internal xref">10.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="auto internal xref">10.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#appendix-A" class="auto internal xref">Appendix A</a>.  <a href="#name-evaluation" class="internal xref">Evaluation</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#appendix-B" class="auto internal xref">Appendix B</a>.  <a href="#name-change-log" class="internal xref">Change Log</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.1">
                <p id="section-toc.1-1.12.2.1.1"><a href="#appendix-B.1" class="auto internal xref">B.1</a>.  <a href="#name-since-draft-ietf-core-dns-o" class="internal xref">Since draft-ietf-core-dns-over-coap-16</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.2">
                <p id="section-toc.1-1.12.2.2.1"><a href="#appendix-B.2" class="auto internal xref">B.2</a>.  <a href="#name-since-draft-ietf-core-dns-ov" class="internal xref">Since draft-ietf-core-dns-over-coap-15</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.3">
                <p id="section-toc.1-1.12.2.3.1"><a href="#appendix-B.3" class="auto internal xref">B.3</a>.  <a href="#name-since-draft-ietf-core-dns-ove" class="internal xref">Since draft-ietf-core-dns-over-coap-14</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.4">
                <p id="section-toc.1-1.12.2.4.1"><a href="#appendix-B.4" class="auto internal xref">B.4</a>.  <a href="#name-since-draft-ietf-core-dns-over" class="internal xref">Since draft-ietf-core-dns-over-coap-13</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.5">
                <p id="section-toc.1-1.12.2.5.1"><a href="#appendix-B.5" class="auto internal xref">B.5</a>.  <a href="#name-since-draft-ietf-core-dns-over-" class="internal xref">Since draft-ietf-core-dns-over-coap-12</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.6">
                <p id="section-toc.1-1.12.2.6.1"><a href="#appendix-B.6" class="auto internal xref">B.6</a>.  <a href="#name-since-draft-ietf-core-dns-over-c" class="internal xref">Since draft-ietf-core-dns-over-coap-10</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.7">
                <p id="section-toc.1-1.12.2.7.1"><a href="#appendix-B.7" class="auto internal xref">B.7</a>.  <a href="#name-since-draft-ietf-core-dns-over-co" class="internal xref">Since draft-ietf-core-dns-over-coap-09</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.8">
                <p id="section-toc.1-1.12.2.8.1"><a href="#appendix-B.8" class="auto internal xref">B.8</a>.  <a href="#name-since-draft-ietf-core-dns-over-coa" class="internal xref">Since draft-ietf-core-dns-over-coap-08</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.9">
                <p id="section-toc.1-1.12.2.9.1"><a href="#appendix-B.9" class="auto internal xref">B.9</a>.  <a href="#name-since-draft-ietf-core-dns-over-coap" class="internal xref">Since draft-ietf-core-dns-over-coap-07</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.10">
                <p id="section-toc.1-1.12.2.10.1"><a href="#appendix-B.10" class="auto internal xref">B.10</a>. <a href="#name-since-draft-ietf-core-dns-over-coap-2" class="internal xref">Since draft-ietf-core-dns-over-coap-06</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.11">
                <p id="section-toc.1-1.12.2.11.1"><a href="#appendix-B.11" class="auto internal xref">B.11</a>. <a href="#name-since-draft-ietf-core-dns-over-coap-3" class="internal xref">Since draft-ietf-core-dns-over-coap-05</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.12">
                <p id="section-toc.1-1.12.2.12.1"><a href="#appendix-B.12" class="auto internal xref">B.12</a>. <a href="#name-since-draft-ietf-core-dns-over-coap-4" class="internal xref">Since draft-ietf-core-dns-over-coap-04</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.13">
                <p id="section-toc.1-1.12.2.13.1"><a href="#appendix-B.13" class="auto internal xref">B.13</a>. <a href="#name-since-draft-ietf-core-dns-over-coap-5" class="internal xref">Since draft-ietf-core-dns-over-coap-03</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.14">
                <p id="section-toc.1-1.12.2.14.1"><a href="#appendix-B.14" class="auto internal xref">B.14</a>. <a href="#name-since-draft-ietf-core-dns-over-coap-6" class="internal xref">Since draft-ietf-core-dns-over-coap-02</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.15">
                <p id="section-toc.1-1.12.2.15.1"><a href="#appendix-B.15" class="auto internal xref">B.15</a>. <a href="#name-since-draft-ietf-core-dns-over-coap-7" class="internal xref">Since draft-ietf-core-dns-over-coap-01</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.16">
                <p id="section-toc.1-1.12.2.16.1"><a href="#appendix-B.16" class="auto internal xref">B.16</a>. <a href="#name-since-draft-ietf-core-dns-over-coap-8" class="internal xref">Since draft-ietf-core-dns-over-coap-00</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.17">
                <p id="section-toc.1-1.12.2.17.1"><a href="#appendix-B.17" class="auto internal xref">B.17</a>. <a href="#name-since-draft-lenders-dns-ove" class="internal xref">Since draft-lenders-dns-over-coap-04</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#appendix-C" class="auto internal xref"></a><a href="#name-acknowledgments" class="internal xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#appendix-D" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">This document defines DNS over CoAP (DoC), a protocol to send DNS
<span>[<a href="#STD13" class="cite xref">STD13</a>]</span> queries and get DNS responses over the Constrained Application
Protocol (CoAP) <span>[<a href="#RFC7252" class="cite xref">RFC7252</a>]</span> using OPCODE 0 (Query). Each DNS query-response pair is mapped into a
CoAP message exchange. Each CoAP message can be secured by DTLS <span>[<a href="#RFC6347" class="cite xref">RFC6347</a>]</span> <span>[<a href="#RFC9147" class="cite xref">RFC9147</a>]</span> or
Object Security for Constrained RESTful Environments (OSCORE) <span>[<a href="#RFC8613" class="cite xref">RFC8613</a>]</span>
but also TLS <span>[<a href="#RFC8323" class="cite xref">RFC8323</a>]</span> <span>[<a href="#RFC8446" class="cite xref">RFC8446</a>]</span>
to ensure message integrity and confidentiality.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">The application use case of DoC is inspired by DNS over HTTPS <span>[<a href="#RFC8484" class="cite xref">RFC8484</a>]</span>
(DoH). DoC, however, aims for deployment in the constrained Internet of
Things (IoT), which usually conflicts with the requirements introduced by
HTTPS.
Constrained IoT devices may be restricted in memory, power consumption,
link-layer frame sizes, throughput, and latency. They may
only have a handful kilobytes of both RAM and ROM. They may sleep for long
durations of time, after which they need to refresh the named resources they
know about. Name resolution in such scenarios must take into account link
layer frame sizes of only a few hundred bytes, bit rates in the magnitude
of kilobits per second, and latencies of several seconds <span>[<a href="#RFC7228" class="cite xref">RFC7228</a>]</span> <span>[<a href="#I-D.ietf-iotops-7228bis" class="cite xref">I-D.ietf-iotops-7228bis</a>]</span> <span class="cref" id="remove-constr-nodes">RFC Ed.: Please remove the <span>[<a href="#RFC7228" class="cite xref">RFC7228</a>]</span> reference and replace it with <span>[<a href="#I-D.ietf-iotops-7228bis" class="cite xref">I-D.ietf-iotops-7228bis</a>]</span> throughout the document in case <span>[<a href="#I-D.ietf-iotops-7228bis" class="cite xref">I-D.ietf-iotops-7228bis</a>]</span> becomes an RFC before publication.</span>.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">In order not to be burdened by the resource requirements of TCP and HTTPS, constrained IoT devices could use DNS over DTLS <span>[<a href="#RFC8094" class="cite xref">RFC8094</a>]</span>.
In contrast to DNS over DTLS, DoC
can take advantage of CoAP features to mitigate drawbacks of datagram-based
communication. These features include: block-wise transfer <span>[<a href="#RFC7959" class="cite xref">RFC7959</a>]</span>, which solves
the Path MTU problem of DNS over DTLS (see <span>[<a href="#RFC8094" class="cite xref">RFC8094</a>], <a href="https://rfc-editor.org/rfc/rfc8094#section-5" class="relref">Section 5</a></span>); CoAP
proxies, which provide an additional level of caching; re-use of data
structures for application traffic and DNS information, which saves memory
on constrained devices.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">To avoid the resource requirements of DTLS or TLS on top of UDP (e.g., introduced by DNS over DTLS <span>[<a href="#RFC8094" class="cite xref">RFC8094</a>]</span> or DNS over QUIC <span>[<a href="#RFC9250" class="cite xref">RFC9250</a>]</span>), DoC allows for lightweight message protection based on OSCORE.<a href="#section-1-4" class="pilcrow">¶</a></p>
<span id="name-basic-doc-architecture"></span><div id="fig-overview-arch">
<figure id="figure-1">
        <div id="section-1-5.1">
          <div class="alignLeft art-svg artwork" id="section-1-5.1.1">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="224" width="552" viewBox="0 0 552 224" class="diagram" text-anchor="middle" font-family="monospace" font-size="13px" stroke-linecap="round">
              <path d="M 8,96 L 8,144" fill="none" stroke="black"></path>
              <path d="M 64,96 L 64,144" fill="none" stroke="black"></path>
              <path d="M 208,96 L 208,144" fill="none" stroke="black"></path>
              <path d="M 264,96 L 264,144" fill="none" stroke="black"></path>
              <path d="M 400,112 L 400,128" fill="none" stroke="black"></path>
              <path d="M 544,112 L 544,128" fill="none" stroke="black"></path>
              <path d="M 8,96 L 64,96" fill="none" stroke="black"></path>
              <path d="M 208,96 L 264,96" fill="none" stroke="black"></path>
              <path d="M 416,96 L 528,96" fill="none" stroke="black"></path>
              <path d="M 72,112 L 200,112" fill="none" stroke="black"></path>
              <path d="M 272,112 L 288,112" fill="none" stroke="black"></path>
              <path d="M 304,112 L 320,112" fill="none" stroke="black"></path>
              <path d="M 336,112 L 352,112" fill="none" stroke="black"></path>
              <path d="M 368,112 L 392,112" fill="none" stroke="black"></path>
              <path d="M 72,128 L 200,128" fill="none" stroke="black"></path>
              <path d="M 272,128 L 296,128" fill="none" stroke="black"></path>
              <path d="M 312,128 L 328,128" fill="none" stroke="black"></path>
              <path d="M 344,128 L 360,128" fill="none" stroke="black"></path>
              <path d="M 376,128 L 392,128" fill="none" stroke="black"></path>
              <path d="M 8,144 L 64,144" fill="none" stroke="black"></path>
              <path d="M 208,144 L 264,144" fill="none" stroke="black"></path>
              <path d="M 416,144 L 528,144" fill="none" stroke="black"></path>
              <path d="M 40,192 L 80,192" fill="none" stroke="black"></path>
              <path d="M 192,192 L 224,192" fill="none" stroke="black"></path>
              <path d="M 248,192 L 264,192" fill="none" stroke="black"></path>
              <path d="M 480,192 L 504,192" fill="none" stroke="black"></path>
              <path d="M 32,176 L 40,192" fill="none" stroke="black"></path>
              <path d="M 236,168 L 248,192" fill="none" stroke="black"></path>
              <path d="M 104,64 L 120,32" fill="none" stroke="black"></path>
              <path d="M 224,192 L 236,168" fill="none" stroke="black"></path>
              <path d="M 504,192 L 512,176" fill="none" stroke="black"></path>
              <path d="M 416,96 C 407.16936,96 400,103.16936 400,112" fill="none" stroke="black"></path>
              <path d="M 528,96 C 536.83064,96 544,103.16936 544,112" fill="none" stroke="black"></path>
              <path d="M 416,144 C 407.16936,144 400,136.83064 400,128" fill="none" stroke="black"></path>
              <path d="M 528,144 C 536.83064,144 544,136.83064 544,128" fill="none" stroke="black"></path>
              <polygon class="arrowhead" points="400,112 388,106.4 388,117.6" fill="black" transform="rotate(0,392,112)"></polygon>
              <polygon class="arrowhead" points="280,128 268,122.4 268,133.6" fill="black" transform="rotate(180,272,128)"></polygon>
              <polygon class="arrowhead" points="208,112 196,106.4 196,117.6" fill="black" transform="rotate(0,200,112)"></polygon>
              <polygon class="arrowhead" points="80,128 68,122.4 68,133.6" fill="black" transform="rotate(180,72,128)"></polygon>
              <g class="text">
                <text x="152" y="36">FETCH</text>
                <text x="268" y="36">coaps://[2001:db8::1]/</text>
                <text x="108" y="84">CoAP</text>
                <text x="160" y="84">request</text>
                <text x="108" y="100">[DNS</text>
                <text x="156" y="100">query]</text>
                <text x="304" y="100">DNS</text>
                <text x="344" y="100">query</text>
                <text x="32" y="116">DoC</text>
                <text x="232" y="116">DoC</text>
                <text x="464" y="116">DNS</text>
                <text x="36" y="132">Client</text>
                <text x="236" y="132">Server</text>
                <text x="468" y="132">Infrastructure</text>
                <text x="100" y="148">CoAP</text>
                <text x="156" y="148">response</text>
                <text x="296" y="148">DNS</text>
                <text x="348" y="148">response</text>
                <text x="100" y="164">[DNS</text>
                <text x="160" y="164">response]</text>
                <text x="96" y="196">DNS</text>
                <text x="132" y="196">over</text>
                <text x="172" y="196">CoAP</text>
                <text x="280" y="196">DNS</text>
                <text x="316" y="196">over</text>
                <text x="408" y="196">UDP/HTTPS/QUIC/..</text>
              </g>
            </svg><a href="#section-1-5.1.1" class="pilcrow">¶</a>
</div>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-basic-doc-architecture" class="selfRef">Basic DoC architecture</a>
        </figcaption></figure>
</div>
<p id="section-1-6">The most important components of DoC can be seen in <a href="#fig-overview-arch" class="auto internal xref">Figure 1</a>: a DoC
client tries to resolve DNS information by sending DNS queries carried within
CoAP requests to a DoC server.
That DoC server is a DNS client (i.e., a stub or recursive resolver) that resolves DNS information by using other DNS transports such
as DNS over UDP <span>[<a href="#STD13" class="cite xref">STD13</a>]</span>, DNS over HTTPS <span>[<a href="#RFC8484" class="cite xref">RFC8484</a>]</span>, or DNS over QUIC <span>[<a href="#RFC9250" class="cite xref">RFC9250</a>]</span> when communicating with the upstream
DNS infrastructure.
Using that information, the DoC server then replies to the queries of the DoC client with DNS
responses carried within CoAP responses.
A DoC server <span class="bcp14">MAY</span> also serve as DNSSEC validator to provide DNSSEC validation to the more
constrained DoC clients.<a href="#section-1-6" class="pilcrow">¶</a></p>
<p id="section-1-7">Note that this specification is distinct from DoH, since the CoAP-specific FETCH method <span>[<a href="#RFC8132" class="cite xref">RFC8132</a>]</span> is used.
This has the benefit of having the DNS query in the body as when using the POST method, but still with the same caching advantages of responses to requests that use the GET method.
Having the DNS query in the body means that we do not need extra base64 encoding, which would increase
code complexity and message sizes.
Also, this allows for the block-wise transfer of queries <span>[<a href="#RFC7959" class="cite xref">RFC7959</a>]</span>.<a href="#section-1-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="terminology-and-conventions">
<section id="section-2">
      <h2 id="name-terminology-and-conventions">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-terminology-and-conventions" class="section-name selfRef">Terminology and Conventions</a>
      </h2>
<p id="section-2-1">The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
"<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they
appear in all capitals, as shown here.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">A server that provides the service specified in this document is called a "DoC
server" to differentiate it from a classic "DNS server".
A DoC server acts either as a DNS stub resolver or a DNS recursive resolver <span>[<a href="#BCP219" class="cite xref">BCP219</a>]</span>.
As such, the DoC server communicates with an "upstream DNS infrastructure" or a single "upstream DNS server".
A "DoC resource" is a CoAP resource <span>[<a href="#RFC7252" class="cite xref">RFC7252</a>]</span> at the DoC server that DoC clients can target to send a DNS query in a CoAP request.<a href="#section-2-2" class="pilcrow">¶</a></p>
<p id="section-2-3">A client using the service specified in this document to retrieve the
DNS information is called a "DoC client".<a href="#section-2-3" class="pilcrow">¶</a></p>
<p id="section-2-4">The term "constrained nodes" is used as defined in <span>[<a href="#RFC7228" class="cite xref">RFC7228</a>]</span>.
<span>[<a href="#RFC6690" class="cite xref">RFC6690</a>]</span> describes that "Constrained RESTful Environments (CoRE)" realize the Representational State Transfer (REST) architecture <span>[<a href="#REST" class="cite xref">REST</a>]</span> in a suitable form for such constrained nodes.<a href="#section-2-4" class="pilcrow">¶</a></p>
<p id="section-2-5">The terms "payload" and "body" are used as defined in <span>[<a href="#RFC7959" class="cite xref">RFC7959</a>], <a href="https://rfc-editor.org/rfc/rfc7959#section-2" class="relref">Section 2</a></span>.
Note that, when block-wise transfer is not used, the terms "payload" and "body" are to be understood as equal.<a href="#section-2-5" class="pilcrow">¶</a></p>
<p id="section-2-6">For better readability, in the examples in this document the binary payload and resource records are shown in a hexadecimal representation as well as a human-readable format.
In the actual message sent and received, however, they are encoded in the binary message format defined in <span>[<a href="#STD13" class="cite xref">STD13</a>]</span>.<a href="#section-2-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_doc-server-selection">
<section id="section-3">
      <h2 id="name-selection-of-a-doc-server">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-selection-of-a-doc-server" class="section-name selfRef">Selection of a DoC Server</a>
      </h2>
<p id="section-3-1">While there is no path specified for the DoC resource, it is <span class="bcp14">RECOMMENDED</span> to use the root path "/"
to keep the CoAP requests small.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">The DoC client needs to know the DoC server and the DoC resource at the DoC server.
Possible options to assure this could be manual configuration of a Uniform Resource Identifier (URI) <span>[<a href="#RFC3986" class="cite xref">RFC3986</a>]</span> or Constrained Resource Identifier (CRI) <span>[<a href="#I-D.ietf-core-href" class="cite xref">I-D.ietf-core-href</a>]</span>,
or automatic configuration, e.g., using a CoRE resource directory
<span>[<a href="#RFC9176" class="cite xref">RFC9176</a>]</span>, DHCP or Router Advertisement options <span>[<a href="#RFC9463" class="cite xref">RFC9463</a>]</span>, or discovery of designated resolvers
<span>[<a href="#RFC9462" class="cite xref">RFC9462</a>]</span>.
Automatic configuration <span class="bcp14">SHOULD</span> only be done from a trusted source.<a href="#section-3-2" class="pilcrow">¶</a></p>
<div id="discovery-by-resource-type">
<section id="section-3.1">
        <h3 id="name-discovery-by-resource-type">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-discovery-by-resource-type" class="section-name selfRef">Discovery by Resource Type</a>
        </h3>
<p id="section-3.1-1">For discovery of the DoC resource through a link mechanism that allows describing a resource type
(e.g., the Resource Type attribute in <span>[<a href="#RFC6690" class="cite xref">RFC6690</a>]</span>), this document introduces the resource type "core.dns".
It can be used to identify a generic DNS resolver that is available to the client.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="discovery-using-svcb-resource-records-or-dnr">
<section id="section-3.2">
        <h3 id="name-discovery-using-svcb-resour">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-discovery-using-svcb-resour" class="section-name selfRef">Discovery using SVCB Resource Records or DNR</a>
        </h3>
<p id="section-3.2-1">A DoC server can also be discovered using Service Binding (SVCB) Resource Records (RR) <span>[<a href="#RFC9460" class="cite xref">RFC9460</a>]</span> <span>[<a href="#RFC9461" class="cite xref">RFC9461</a>]</span> or Discovery of Network-designated Resolvers (DNR)
Service Parameters <span>[<a href="#RFC9463" class="cite xref">RFC9463</a>]</span>.
<span>[<a href="#RFC8323" class="cite xref">RFC8323</a>]</span> defines the Application-Layer Protocol Negotiation (ALPN) ID for CoAP over TLS servers and <span>[<a href="#I-D.ietf-core-coap-dtls-alpn" class="cite xref">I-D.ietf-core-coap-dtls-alpn</a>]</span> defines the ALPN ID for CoAP over DTLS servers.
Because the ALPN extension is only defined for (D)TLS, these mechanisms cannot be used for DoC servers which use only OSCORE <span>[<a href="#RFC8613" class="cite xref">RFC8613</a>]</span> and Ephemeral Diffie-Hellman Over COSE (EDHOC) <span>[<a href="#RFC9528" class="cite xref">RFC9528</a>]</span> (with COSE abbreviating "Concise Binary Object Notation (CBOR) Object Signing and Encryption" <span>[<a href="#RFC9052" class="cite xref">RFC9052</a>]</span>) for security.
Specifying an alternate discovery mechanism is out of scope of this specification.
<span>[<a href="#I-D.lenders-core-dnr" class="cite xref">I-D.lenders-core-dnr</a>]</span> provides  further exploration of the challenges here.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">This document is not an SVCB mapping document for the CoAP schemes
as defined in <span><a href="https://rfc-editor.org/rfc/rfc9460#section-2.4.3" class="relref">Section 2.4.3</a> of [<a href="#RFC9460" class="cite xref">RFC9460</a>]</span>.
A full SVCB mapping is specified in <span>[<a href="#I-D.ietf-core-transport-indication" class="cite xref">I-D.ietf-core-transport-indication</a>]</span>.
It generalizes mechanisms for all CoAP services.
This document introduces only the discovery of DoC services.<a href="#section-3.2-2" class="pilcrow">¶</a></p>
<p id="section-3.2-3">This document specifies "docpath" as
a single-valued SvcParamKey that is mandatory for DoC SVCB records.
If the "docpath" SvcParamKey is absent, the service should not be considered a valid DoC service.<a href="#section-3.2-3" class="pilcrow">¶</a></p>
<p id="section-3.2-4">The docpath is devided up into segments of the absolute path to the DoC resource (docpath-segment),
each a sequence of 1-255 octets.
In ABNF <span>[<a href="#RFC5234" class="cite xref">RFC5234</a>]</span>:<a href="#section-3.2-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.2-5">
<pre>
docpath-segment = 1*255OCTET
</pre><a href="#section-3.2-5" class="pilcrow">¶</a>
</div>
<p id="section-3.2-6">Note that this restricts the length of each docpath-segment to at most 255 octets.
Paths with longer segments cannot be advertised with the "docpath" SvcParam and are thus <span class="bcp14">NOT RECOMMENDED</span> for the path to the DoC resource.<a href="#section-3.2-6" class="pilcrow">¶</a></p>
<p id="section-3.2-7">The presentation format value of "docpath" <span class="bcp14">SHALL</span> be a comma-separated list (<span><a href="https://rfc-editor.org/rfc/rfc9460#appendix-A.1" class="relref">Appendix A.1</a> of [<a href="#RFC9460" class="cite xref">RFC9460</a>]</span>)
of 0 or more docpath-segments.
The root path "/" is represented by 0 docpath-segments, i.e., an empty list.
The same considerations for the "," and "" characters in docpath-segments for zone-file
implementations as for the alpn-ids in an "alpn" SvcParam apply (<span><a href="https://rfc-editor.org/rfc/rfc9460#section-7.1.1" class="relref">Section 7.1.1</a> of [<a href="#RFC9460" class="cite xref">RFC9460</a>]</span>).<a href="#section-3.2-7" class="pilcrow">¶</a></p>
<p id="section-3.2-8">The wire-format value for "docpath" consists of 0 or more sequences of octets prefixed by their
respective length as a single octet.
We call this single octet the length octet.
The length octet and the corresponding sequence form a length-value pair.
These length-value pairs are concatenated to form the SvcParamValue.
These pairs <span class="bcp14">MUST</span> exactly fill the SvcParamValue; otherwise, the SvcParamValue is malformed.
Each such length-value pair represents one segment of the absolute path to the DoC resource.
The root path "/" is represented by 0 length-value pairs, i.e., SvcParamValue length 0.<a href="#section-3.2-8" class="pilcrow">¶</a></p>
<p id="section-3.2-9">Note that this format uses the same encoding as the "alpn" SvcParam and can reuse the
decoders and encoders for that SvcParam with the adaption that a length of zero is allowed.
As long as each docpath-segment is of length 0 and 24 octets, it is easily transferred into the path
representation in CRIs <span>[<a href="#I-D.ietf-core-href" class="cite xref">I-D.ietf-core-href</a>]</span> by masking each length octet with the CBOR text string major type 3
(<code>0x60</code> as an octet, see <span>[<a href="#RFC8949" class="cite xref">RFC8949</a>]</span>).
Furthermore, it is easily transferable into a sequence of CoAP Uri-Path options by
mapping each length octet into the Option Delta and Option Length of the corresponding CoAP Uri-Path
option, provided the docpath-segments are all of a length between 0 and 12 octets (see <span>[<a href="#RFC7252" class="cite xref">RFC7252</a>], <a href="https://rfc-editor.org/rfc/rfc7252#section-3.1" class="relref">Section 3.1</a></span>).
Likewise, it can be transferred into a URI path-abempty form by replacing each length octet with the "/" character
None of the abovementioned prevent longer docpath-segments than the considered, they just make the
translation harder, as they require to make space for the longer delimiters, in turn requiring to move octets.<a href="#section-3.2-9" class="pilcrow">¶</a></p>
<p id="section-3.2-10">To use the service binding from an SVCB RR or DNR Encrypted DNS option, the DoC client <span class="bcp14">MUST</span> send a DoC request constructed from the SvcParams including "docpath".
The construction algorithm for DoC requests is as follows, going through the provided records in order of their priority.
For the purposes of this algorithm, the DoC client is assumed to be SVCB-optional (see <span><a href="https://rfc-editor.org/rfc/rfc9460#section-3" class="relref">Section 3</a> of [<a href="#RFC9460" class="cite xref">RFC9460</a>]</span>).<a href="#section-3.2-10" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2-11.1">
            <p id="section-3.2-11.1.1">If the "alpn" SvcParam value for the service is "coap", a CoAP request for CoAP over TLS <span class="bcp14">MUST</span> be constructed <span>[<a href="#RFC8323" class="cite xref">RFC8323</a>]</span>.
If it is "co", a CoAP request for CoAP over DTLS <span class="bcp14">MUST</span> be constructed <span>[<a href="#I-D.ietf-core-coap-dtls-alpn" class="cite xref">I-D.ietf-core-coap-dtls-alpn</a>]</span>.
Any other SvcParamKeys specifying a transport are out of the scope of this document.<a href="#section-3.2-11.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.2-11.2">
            <p id="section-3.2-11.2.1">The destination address for the request <span class="bcp14">SHOULD</span> be taken from additional information about the target, e.g., from an AAAA record associated with the target name or from an "ipv6hint" SvcParam value.
As a fallback, an address <span class="bcp14">MAY</span> be queried for the target name of the SVCB record.<a href="#section-3.2-11.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.2-11.3">
            <p id="section-3.2-11.3.1">The destination port for the request <span class="bcp14">MUST</span> be taken from the "port" SvcParam value, if present.
Otherwise, take the default port of the CoAP transport, e.g., with regards to this specification TCP port 5684 for "coap" or UDP port 5684 for "co".
This document introduces no limitations on the ports that can be used.
If a malicious SVCB record allows its originator to influence message payloads, <span><a href="https://rfc-editor.org/rfc/rfc9460#section-12" class="relref">Section 12</a> of [<a href="#RFC9460" class="cite xref">RFC9460</a>]</span> recommends placing such restrictions in the SVCB mapping document.
The records used in this document only infuence the Uri-Path option.
That option is only sent in the plaintext of an encrytped (D)TLS channel,
and thus does not warrant any limitations.<a href="#section-3.2-11.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.2-11.4">
            <p id="section-3.2-11.4.1">The request URI's hostname component <span class="bcp14">MUST</span> be the Authentication Domain Name (ADN) when obtained through DNR
and <span class="bcp14">MUST</span> be the target name of the SVCB record when obtained through a <code>_dns</code> query
(if AliasMode is used, to the target name of the AliasMode record).
This can be achieved efficiently by setting that name in TLS Server Name Indication (SNI) <span>[<a href="#RFC8446" class="cite xref">RFC8446</a>]</span>,
or by setting the Uri-Host option on each request.<a href="#section-3.2-11.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.2-11.5">
            <p id="section-3.2-11.5.1">For each element in the CBOR sequence of the "docpath" SvcParam value, a Uri-Path option <span class="bcp14">MUST</span> be added to the request.<a href="#section-3.2-11.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-3.2-11.6">
            <p id="section-3.2-11.6.1">If the request constructed this way receives a response, the same SVCB record <span class="bcp14">MUST</span> be used for construction of future DoC queries.
If not, or if the endpoint becomes unreachable, the algorithm repeats with the SVCB RR or DNR Encrypted DNS option with the next highest Service Priority as a fallback (see Sections <a href="https://rfc-editor.org/rfc/rfc9460#section-2.4.1" class="relref">2.4.1</a> and <a href="https://rfc-editor.org/rfc/rfc9460#section-3" class="relref">3</a> of <span>[<a href="#RFC9460" class="cite xref">RFC9460</a>]</span>).<a href="#section-3.2-11.6.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-3.2-12">A more generalized construction algorithm for any CoAP request can be found in <span>[<a href="#I-D.ietf-core-transport-indication" class="cite xref">I-D.ietf-core-transport-indication</a>]</span>.<a href="#section-3.2-12" class="pilcrow">¶</a></p>
<div id="examples">
<section id="section-3.2.1">
          <h4 id="name-examples">
<a href="#section-3.2.1" class="section-number selfRef">3.2.1. </a><a href="#name-examples" class="section-name selfRef">Examples</a>
          </h4>
<p id="section-3.2.1-1"><span class="cref" id="replace-hex">RFC Ed.: Since the number for "docpath" was not assigned at the time of writing, we
used the hex <code>ff 0a</code> (in decimal 65290; from the private use range of SvcParamKeys) throughout
this section. Before publication, please replace <code>ff 0a</code> with the hexadecimal representation of
the final value assigned by IANA in this section. Please remove this paragraph after that.</span><a href="#section-3.2.1-1" class="pilcrow">¶</a></p>
<p id="section-3.2.1-2">A typical SVCB resource record response for a DoC server at the root path "/" of the server looks
like the following (the "docpath" SvcParam is the last 4 bytes <code>ff 0a 00 00</code> in the binary):<a href="#section-3.2.1-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.2.1-3">
<pre>
Resource record (binary):
  04 5f 64 6e 73 07 65 78 61 6d 70 6c 65 03 6f 72
  67 00 00 40 00 01 00 00 06 28 00 1e 00 01 03 64
  6e 73 07 65 78 61 6d 70 6c 65 03 6f 72 67 00 00
  01 00 03 02 63 6f ff 0a 00 00

Resource record (human-readable):
  _dns.example.org.  1576  IN SVCB 1 dns.example.org (
      alpn=co docpath )
</pre><a href="#section-3.2.1-3" class="pilcrow">¶</a>
</div>
<p id="section-3.2.1-4">The root path is <span class="bcp14">RECOMMENDED</span> but not required. Here are two examples where the "docpath" represents
paths of varying depth. First, "/dns" is provided in the following example
(the last 8 bytes <code>ff 0a 00 04 03 64 6e 73</code>):<a href="#section-3.2.1-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.2.1-5">
<pre>
Resource record (binary):
  04 5f 64 6e 73 07 65 78 61 6d 70 6c 65 03 6f 72
  67 00 00 40 00 01 00 00 00 55 00 22 00 01 03 64
  6e 73 07 65 78 61 6d 70 6c 65 03 6f 72 67 00 00
  01 00 03 02 63 6f ff 0a 00 04 03 64 6e 73

Resource record (human-readable):
  _dns.example.org.    85  IN SVCB 1 dns.example.org (
      alpn=co docpath=dns )
</pre><a href="#section-3.2.1-5" class="pilcrow">¶</a>
</div>
<p id="section-3.2.1-6">Second, an examples for the path "/n/s" (the last 8 bytes <code>ff 0a 00 04 01 6e 01 73</code>):<a href="#section-3.2.1-6" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.2.1-7">
<pre>
Resource record (binary):
  04 5f 64 6e 73 07 65 78 61 6d 70 6c 65 03 6f 72
  67 00 00 40 00 01 00 00 06 6b 00 22 00 01 03 64
  6e 73 07 65 78 61 6d 70 6c 65 03 6f 72 67 00 00
  01 00 03 02 63 6f ff 0a 00 04 01 6e 01 73

Resource record (human-readable):
  _dns.example.org.   643  IN SVCB 1 dns.example.org (
      alpn=co docpath=n,s )
</pre><a href="#section-3.2.1-7" class="pilcrow">¶</a>
</div>
<p id="section-3.2.1-8">If the server also provides DNS over HTTPS, "dohpath" and "docpath" <span class="bcp14">MAY</span> co-exist:<a href="#section-3.2.1-8" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.2.1-9">
<pre>
Resource record (binary):
  04 5f 64 6e 73 07 65 78 61 6d 70 6c 65 03 6f 72
  67 00 00 40 00 01 00 00 01 ad 00 2b 00 01 03 64
  6e 73 07 65 78 61 6d 70 6c 65 03 6f 72 67 00 00
  01 00 06 02 68 33 02 63 6f 00 07 00 07 2f 7b 3f
  64 6e 73 7d ff 0a 00 00

Resource record (human-readable):
  _dns.example.org.   429  IN SVCB 1 dns.example.org (
      alpn=h3,co dohpath=/{?dns} docpath )
</pre><a href="#section-3.2.1-9" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="basic-message-exchange">
<section id="section-4">
      <h2 id="name-basic-message-exchange">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-basic-message-exchange" class="section-name selfRef">Basic Message Exchange</a>
      </h2>
<div id="sec_content-format">
<section id="section-4.1">
        <h3 id="name-the-application-dns-message">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-the-application-dns-message" class="section-name selfRef">The "application/dns-message" Content-Format</a>
        </h3>
<p id="section-4.1-1">This document defines a CoAP Content-Format identifier for the Internet
media type "application/dns-message" to be the mnemonic 553 — based on the port assignment of DNS.
This media type is defined as in <span><a href="https://rfc-editor.org/rfc/rfc8484#section-6" class="relref">Section 6</a> of [<a href="#RFC8484" class="cite xref">RFC8484</a>]</span>, i.e., a single DNS message encoded in the DNS on-the-wire format <span>[<a href="#STD13" class="cite xref">STD13</a>]</span>.
Both DoC client and DoC server <span class="bcp14">MUST</span> be able to parse contents in the "application/dns-message" Content-Format.
This document only specifies OPCODE 0 (Query) for DNS over CoAP messages.
Future documents can provide considerations for additional OPCODEs or extend its specification (e.g. by describing whether other CoAP codes need to be used for which OPCODE).
Unless another error takes precedence, a DoC server uses RCODE = 4, NotImp <span>[<a href="#STD13" class="cite xref">STD13</a>]</span>, in its response to a query with an OPCODE that it does not implement (see also <a href="#sec_resp-examples" class="auto internal xref">Section 4.3.3</a>).<a href="#section-4.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_queries">
<section id="section-4.2">
        <h3 id="name-dns-queries-in-coap-request">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-dns-queries-in-coap-request" class="section-name selfRef">DNS Queries in CoAP Requests</a>
        </h3>
<p id="section-4.2-1">A DoC client encodes a single DNS query in one or more CoAP request
messages that use the CoAP FETCH <span>[<a href="#RFC8132" class="cite xref">RFC8132</a>]</span> request method.
Requests <span class="bcp14">SHOULD</span> include an Accept option to indicate the type of content that can be parsed in the response.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">Since CoAP provides reliability at the message layer (e.g., through Confirmable messages) the retransmission mechanism of the
DNS protocol as defined in <span>[<a href="#STD13" class="cite xref">STD13</a>]</span> is not needed.<a href="#section-4.2-2" class="pilcrow">¶</a></p>
<div id="request-format">
<section id="section-4.2.1">
          <h4 id="name-request-format">
<a href="#section-4.2.1" class="section-number selfRef">4.2.1. </a><a href="#name-request-format" class="section-name selfRef">Request Format</a>
          </h4>
<p id="section-4.2.1-1">When sending a CoAP request, a DoC client <span class="bcp14">MUST</span> include the DNS query in the body of the CoAP request.
As specified in <span><a href="https://rfc-editor.org/rfc/rfc8132#section-2.3.1" class="relref">Section 2.3.1</a> of [<a href="#RFC8132" class="cite xref">RFC8132</a>]</span>, the type of content of the body <span class="bcp14">MUST</span> be indicated using the Content-Format option.
This document specifies the usage of Content-Format "application/dns-message" (for details, see <a href="#sec_content-format" class="auto internal xref">Section 4.1</a>).
A DoC server <span class="bcp14">MUST</span> be able to parse requests of Content-Format "application/dns-message".<a href="#section-4.2.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_req-caching">
<section id="section-4.2.2">
          <h4 id="name-support-of-coap-caching">
<a href="#section-4.2.2" class="section-number selfRef">4.2.2. </a><a href="#name-support-of-coap-caching" class="section-name selfRef">Support of CoAP Caching</a>
          </h4>
<p id="section-4.2.2-1">The DoC client <span class="bcp14">SHOULD</span> set the ID field of the DNS header to 0 to enable a CoAP cache (e.g., a CoAP proxy en-route) to respond to the same DNS queries with a cache entry.
This ensures that the CoAP Cache-Key (see <span>[<a href="#RFC8132" class="cite xref">RFC8132</a>], <a href="https://rfc-editor.org/rfc/rfc8132#section-2" class="relref">Section 2</a></span>) does not change when multiple DNS queries for the same DNS data, carried in CoAP requests, are issued.
Apart from losing these caching benefits, there is no harm it not setting it to 0, e.g., when the query was received from somewhere else.
In any instance, a DoC server <span class="bcp14">MUST</span> copy the ID from the query in its response to that query.<a href="#section-4.2.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_req-examples">
<section id="section-4.2.3">
          <h4 id="name-example">
<a href="#section-4.2.3" class="section-number selfRef">4.2.3. </a><a href="#name-example" class="section-name selfRef">Example</a>
          </h4>
<p id="section-4.2.3-1">The following example illustrates the usage of a CoAP message to
resolve "example.org. IN AAAA" based on the URI "coaps://[2001:db8::1]/". The
CoAP body is encoded in the "application/dns-message" Content-Format.<a href="#section-4.2.3-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.2.3-2">
<pre>
FETCH coaps://[2001:db8::1]/
Content-Format: 553 (application/dns-message)
Accept: 553 (application/dns-message)
Payload (binary):
  00 00 01 00 00 01 00 00 00 00 00 00 07 65 78 61
  6d 70 6c 65 03 6f 72 67 00 00 1c 00 01

Payload (human-readable):
  ;; -&gt;&gt;Header&lt;&lt;- opcode: QUERY, status: NOERROR, id: 0
  ;; flags: rd; QUERY: 1, ANSWER: 0, AUTHORITY: 0, ADDITIONAL: 0

  ;; QUESTION SECTION:
  ;example.org.             IN      AAAA
</pre><a href="#section-4.2.3-2" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="dns-responses-in-coap-responses">
<section id="section-4.3">
        <h3 id="name-dns-responses-in-coap-respo">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-dns-responses-in-coap-respo" class="section-name selfRef">DNS Responses in CoAP Responses</a>
        </h3>
<p id="section-4.3-1">Each DNS query-response pair is mapped to a CoAP request-response operation.
DNS responses are provided in the body of the CoAP response, i.e., it is also possible to transfer them using block-wise transfer <span>[<a href="#RFC7959" class="cite xref">RFC7959</a>]</span>.
A DoC server <span class="bcp14">MUST</span> be able to produce responses in the "application/dns-message"
Content-Format (for details, see <a href="#sec_content-format" class="auto internal xref">Section 4.1</a>) when requested.
The use of the Accept option in the request is optional.
However, all DoC clients <span class="bcp14">MUST</span> be able to parse a "application/dns-message" response (see also <a href="#sec_content-format" class="auto internal xref">Section 4.1</a>).
Any response Content-Format other than "application/dns-message" <span class="bcp14">MUST</span> be indicated with
the Content-Format option by the DoC server.<a href="#section-4.3-1" class="pilcrow">¶</a></p>
<div id="response-codes-and-handling-dns-and-coap-errors">
<section id="section-4.3.1">
          <h4 id="name-response-codes-and-handling">
<a href="#section-4.3.1" class="section-number selfRef">4.3.1. </a><a href="#name-response-codes-and-handling" class="section-name selfRef">Response Codes and Handling DNS and CoAP errors</a>
          </h4>
<p id="section-4.3.1-1">A DNS response indicates either success or failure in the RCODE of the DNS header (see <span>[<a href="#STD13" class="cite xref">STD13</a>]</span>).
It is <span class="bcp14">RECOMMENDED</span> that CoAP responses that carry a parseable DNS response use a 2.05 (Content) response code.<a href="#section-4.3.1-1" class="pilcrow">¶</a></p>
<p id="section-4.3.1-2">CoAP responses using non-successful response codes <span class="bcp14">MUST NOT</span> contain a DNS response
and <span class="bcp14">MUST</span> only be used for errors in the CoAP layer or when a request does not
fulfill the requirements of the DoC protocol.<a href="#section-4.3.1-2" class="pilcrow">¶</a></p>
<p id="section-4.3.1-3">Communication errors with an upstream DNS server (e.g., timeouts) <span class="bcp14">MUST</span> be indicated by including a DNS response with the appropriate RCODE in a successful CoAP response, i.e., using a 2.xx response code.
When an error occurs at the CoAP layer, e.g., if an unexpected request method or an unsupported Content-Format in the request are used, the DoC server <span class="bcp14">SHOULD</span> respond with an appropriate CoAP error.<a href="#section-4.3.1-3" class="pilcrow">¶</a></p>
<p id="section-4.3.1-4">A DoC client might try to repeat a non-successful exchange unless otherwise prohibited.
The DoC client might also decide to repeat a non-successful exchange with a different URI, for instance, when the response indicates an unsupported Content-Format.<a href="#section-4.3.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_resp-caching">
<section id="section-4.3.2">
          <h4 id="name-support-of-coap-caching-2">
<a href="#section-4.3.2" class="section-number selfRef">4.3.2. </a><a href="#name-support-of-coap-caching-2" class="section-name selfRef">Support of CoAP Caching</a>
          </h4>
<p id="section-4.3.2-1">For reliability and energy saving measures, content decoupling (such as en-route caching on proxies) takes a far greater role than it does in HTTP.
Likewise, CoAP makes it possible to use cache validation to refresh stale cache entries to reduce the number of large response messages.
For cache validation, CoAP implementations regularly use hashing over the message content for ETag generation (see <span>[<a href="#RFC7252" class="cite xref">RFC7252</a>], <a href="https://rfc-editor.org/rfc/rfc7252#section-5.10.6" class="relref">Section 5.10.6</a></span>).
As such, the approach to guarantee the same cache key for DNS responses as proposed in DoH (<span>[<a href="#RFC8484" class="cite xref">RFC8484</a>], <a href="https://rfc-editor.org/rfc/rfc8484#section-5.1" class="relref">Section 5.1</a></span>) is not sufficient and needs to be updated so that the TTLs in the response are more often the same regardless of query time.<a href="#section-4.3.2-1" class="pilcrow">¶</a></p>
<p id="section-4.3.2-2">The DoC server <span class="bcp14">MUST</span> ensure that the sum of the Max-Age value of a CoAP response and any TTL in the
DNS response is less than or equal to the corresponding TTL received from an upstream DNS server.
This also includes the default Max-Age value of 60 seconds (see <span><a href="https://rfc-editor.org/rfc/rfc7252#section-5.10.5" class="relref">Section 5.10.5</a> of [<a href="#RFC7252" class="cite xref">RFC7252</a>]</span>) when no Max-Age option is provided.
The DoC client <span class="bcp14">MUST</span> then add the Max-Age value of the carrying CoAP response to all TTLs in a DNS response on reception and use these calculated TTLs for the associated records.<a href="#section-4.3.2-2" class="pilcrow">¶</a></p>
<p id="section-4.3.2-3">The <span class="bcp14">RECOMMENDED</span> algorithm for a DoC server to meet the requirement for DoC is as follows:
Set the Max-Age option of a response to the minimum TTL of a DNS response and subtract this value from all TTLs of that DNS response.
This prevents expired records unintentionally being served from an intermediate CoAP cache.
Additionally, if the ETag for cache validation is based on the content of the response, it allows that ETag not to change.
This then remains the case even if the TTL values are updated by an upstream DNS cache.
If only one record set per DNS response is assumed, a simplification of this algorithm is to just set all TTLs in the response to 0 and set the TTLs at the DoC client to the value of the Max-Age option.<a href="#section-4.3.2-3" class="pilcrow">¶</a></p>
<p id="section-4.3.2-4">If shorter caching periods are plausible, e.g., if the RCODE of the message indicates an error that should only be cached for a minimal duration, the value for the Max-Age option <span class="bcp14">SHOULD</span> be set accordingly.
This value might be 0, but if the DoC server knows that the error will persist, greater values are also conceivable, depending on the projected duration of the error.
The same applies for DNS responses that for any reason do not carry any records with a TTL.<a href="#section-4.3.2-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec_resp-examples">
<section id="section-4.3.3">
          <h4 id="name-examples-2">
<a href="#section-4.3.3" class="section-number selfRef">4.3.3. </a><a href="#name-examples-2" class="section-name selfRef">Examples</a>
          </h4>
<p id="section-4.3.3-1">The following example illustrates the response to the query "example.org. IN
AAAA record", with recursion turned on. Successful responses carry one answer
record including address 2001:db8:1:0:1:2:3:4 and TTL 79689.<a href="#section-4.3.3-1" class="pilcrow">¶</a></p>
<p id="section-4.3.3-2">A successful response:<a href="#section-4.3.3-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.3.3-3">
<pre>
2.05 Content
Content-Format: 553 (application/dns-message)
Max-Age: 58719
Payload (human-readable):
  ;; -&gt;&gt;Header&lt;&lt;- opcode: QUERY, status: NOERROR, id: 0
  ;; flags: qr rd ad; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0

  ;; QUESTION SECTION:
  ;example.org.                 IN      AAAA
  ;; ANSWER SECTION:
  ;example.org.         79689   IN      AAAA    2001:db8:1:0:1:2:3:4
</pre><a href="#section-4.3.3-3" class="pilcrow">¶</a>
</div>
<p id="section-4.3.3-4">When a DNS error – NxDomain (RCODE = 3) for "does.not.exist" in this case – is noted in the DNS response, the CoAP response still indicates success.<a href="#section-4.3.3-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.3.3-5">
<pre>
2.05 Content
Content-Format: 553 (application/dns-message)
Payload (human-readable):
  ;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NXDOMAIN, id: 0
  ;; flags: qr rd ra; QUERY: 1, ANSWER: 0, AUTHORITY: 0, ADDITIONAL: 0

  ;; QUESTION SECTION:
  ;does.not.exist.              IN      AAAA
</pre><a href="#section-4.3.3-5" class="pilcrow">¶</a>
</div>
<p id="section-4.3.3-6">As described in <a href="#sec_content-format" class="auto internal xref">Section 4.1</a>, a DoC server uses NotImp (RCODE = 4) if it does not support an OPCODE—a DNS Update (OPCODE = 5) for "example.org" in this case.<a href="#section-4.3.3-6" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.3.3-7">
<pre>
2.05 Content
Content-Format: 553 (application/dns-message)
Payload (human-readable):
  ;; -&gt;&gt;Header&lt;&lt;- opcode: UPDATE, status: NOTIMP, id: 0
  ;; flags: qr ra; QUERY: 1, ANSWER: 0, AUTHORITY: 0, ADDITIONAL: 0

  ;; QUERY SECTION:
  ;example.org.                 IN      AAAA
</pre><a href="#section-4.3.3-7" class="pilcrow">¶</a>
</div>
<p id="section-4.3.3-8">When an error occurs at the CoAP layer, the DoC server responds with
an appropriate CoAP error, for instance 4.15 (Unsupported Content-Format)
if the Content-Format option in the request was not set to
"application/dns-message" and the Content-Format is not otherwise supported by
the server.<a href="#section-4.3.3-8" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.3.3-9">
<pre>
4.15 Unsupported Content-Format
[no payload]
</pre><a href="#section-4.3.3-9" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="interaction-with-other-coap-and-core-features">
<section id="section-5">
      <h2 id="name-interaction-with-other-coap">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-interaction-with-other-coap" class="section-name selfRef">Interaction with other CoAP and CoRE Features</a>
      </h2>
<div id="dns-push-notifications-and-coap-observe">
<section id="section-5.1">
        <h3 id="name-dns-push-notifications-and-">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-dns-push-notifications-and-" class="section-name selfRef">DNS Push Notifications and CoAP Observe</a>
        </h3>
<p id="section-5.1-1">DNS Push Notifications <span>[<a href="#RFC8765" class="cite xref">RFC8765</a>]</span> provides the capability to asynchronously notify clients about resource record changes.
However, it results in additional overhead, which conflicts with constrained resources.
This is the reason why it is <span class="bcp14">RECOMMENDED</span> to use CoAP Observe <span>[<a href="#RFC7641" class="cite xref">RFC7641</a>]</span> instead of DNS Push
in the DoC domain.
The DoC server <span class="bcp14">SHOULD</span> provide Observe capabilities on its DoC resource and do as follows.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1-2">A DoC server
<span class="bcp14">MAY</span> subscribe to DNS push notifications,
which involves sending a DNS Subscribe message (see (<span><a href="https://rfc-editor.org/rfc/rfc8765#section-6.2" class="relref">Section 6.2</a> of [<a href="#RFC8765" class="cite xref">RFC8765</a>]</span>),
instead of a classic DNS query to fetch the
information on behalf of a DoC client.
This is particularly useful
when a CoAP request indicates that the DoC client wants to observe a resource record,
or when a short-lived record is requested frequently.
After the list of observers for a particular DNS query has become empty
(by explicit or implicit cancellation of the observation as per <span><a href="https://rfc-editor.org/rfc/rfc7641#section-3.6" class="relref">Section 3.6</a> of [<a href="#RFC7641" class="cite xref">RFC7641</a>]</span>),
and no other reason to subscribe to that request is present,
the DoC server <span class="bcp14">SHOULD</span> cancel the corresponding subscription.
This can involve sending an DNS Unsubscribe message or closing the session (see <span><a href="https://rfc-editor.org/rfc/rfc8765#section-6.4" class="relref">Section 6.4</a> of [<a href="#RFC8765" class="cite xref">RFC8765</a>]</span>).<a href="#section-5.1-2" class="pilcrow">¶</a></p>
<p id="section-5.1-3">Whenever the DoC server receives a DNS Push message from the DNS
infrastructure for an observed resource record, the DoC server sends an appropriate Observe notification response
to the DoC client.<a href="#section-5.1-3" class="pilcrow">¶</a></p>
<p id="section-5.1-4">A server that cannot proxy to DNS Push (or any other means of obtaining new records) should not send the response as a notification
(i.e., it should not send the Observe option).<a href="#section-5.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="oscore">
<section id="section-5.2">
        <h3 id="name-oscore">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-oscore" class="section-name selfRef">OSCORE</a>
        </h3>
<p id="section-5.2-1">It is <span class="bcp14">RECOMMENDED</span> to carry DNS messages protected using OSCORE <span>[<a href="#RFC8613" class="cite xref">RFC8613</a>]</span> between the DoC client
and the DoC server. The establishment and maintenance of the OSCORE Security Context is out of the
scope of this document.<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<p id="section-5.2-2"><span>[<a href="#I-D.amsuess-core-cachable-oscore" class="cite xref">I-D.amsuess-core-cachable-oscore</a>]</span> describes a method to allow cache retrieval of OSCORE responses and discusses
the corresponding implications on message sizes and security properties.<a href="#section-5.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="mapping-doc-to-doh">
<section id="section-5.3">
        <h3 id="name-mapping-doc-to-doh">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-mapping-doc-to-doh" class="section-name selfRef">Mapping DoC to DoH</a>
        </h3>
<p id="section-5.3-1">This document provides no specification on how to map between DoC and DoH, e.g., at a CoAP-to-HTTP-proxy; such a direct mapping is <span class="bcp14">NOT RECOMMENDED</span>:
rewriting the FETCH method (<a href="#sec_queries" class="auto internal xref">Section 4.2</a>) and the TTL rewriting (<a href="#sec_resp-caching" class="auto internal xref">Section 4.3.2</a>) as
specified in this draft would be non-trivial.
It is <span class="bcp14">RECOMMENDED</span> to use a DNS forwarder to map between DoC and DoH, as would be the case for
mapping between any other pair of DNS transports.<a href="#section-5.3-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sec_unprotected-coap">
<section id="section-6">
      <h2 id="name-considerations-for-unprotec">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-considerations-for-unprotec" class="section-name selfRef">Considerations for Unprotected Use</a>
      </h2>
<p id="section-6-1">The use of DoC without confidentiality and integrity protection is <span class="bcp14">NOT RECOMMENDED</span>.
Without secure communication, many possible attacks need to be evaluated in the context of
the application's threat model.
This includes known threats for unprotected DNS <span>[<a href="#RFC3833" class="cite xref">RFC3833</a>]</span> <span>[<a href="#RFC9076" class="cite xref">RFC9076</a>]</span> and CoAP <span><a href="https://rfc-editor.org/rfc/rfc7252#section-11" class="relref">Section 11</a> of [<a href="#RFC7252" class="cite xref">RFC7252</a>]</span>.
While DoC does not use the random ID of the DNS header (see <a href="#sec_req-caching" class="auto internal xref">Section 4.2.2</a>), equivalent protection against off-path poisoning attacks is achieved by using random large token values for unprotected CoAP requests.
If a DoC message is unprotected it <span class="bcp14">MUST</span> use a random token of at least 2 bytes length to mitigate this kind of poisoning attack.<a href="#section-6-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="implementation-status">
<section id="section-7">
      <h2 id="name-implementation-status">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-implementation-status" class="section-name selfRef">Implementation Status</a>
      </h2>
<p id="section-7-1">This section records the status of known implementations of the
protocol defined by this specification at the time of posting of
this Internet-Draft, and is based on a proposal described in
<span>[<a href="#RFC7942" class="cite xref">RFC7942</a>]</span>.  The description of implementations in this section is
intended to assist the IETF in its decision processes in
progressing drafts to RFCs.  Please note that the listing of any
individual implementation here does not imply endorsement by the
IETF.  Furthermore, no effort has been spent to verify the
information presented here that was supplied by IETF contributors.
This is not intended as, and must not be construed to be, a
catalog of available implementations or their features.  Readers
are advised to note that other implementations may exist.<a href="#section-7-1" class="pilcrow">¶</a></p>
<p id="section-7-2">According to <span>[<a href="#RFC7942" class="cite xref">RFC7942</a>]</span>, "this will allow reviewers and working
groups to assign due consideration to documents that have the
benefit of running code, which may serve as evidence of valuable
experimentation and feedback that have made the implemented
protocols more mature.  It is up to the individual working groups
to use this information as they see fit".<a href="#section-7-2" class="pilcrow">¶</a></p>
<p id="section-7-3"><span class="cref" id="remove-impl-status">RFC Ed.: Please remove this section before publication. When deleting this
section, please also remove RFC7942 from the references of this document.</span><a href="#section-7-3" class="pilcrow">¶</a></p>
<div id="doc-client">
<section id="section-7.1">
        <h3 id="name-doc-client">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-doc-client" class="section-name selfRef">DoC Client</a>
        </h3>
<p id="section-7.1-1">The authors of this document provide a <a href="https://doc.riot-os.org/group__net__gcoap__dns.html">DoC client implementation available
in the IoT operating system RIOT</a>.<a href="#section-7.1-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-7.1-2">
          <dt id="section-7.1-2.1">Level of maturity:</dt>
          <dd style="margin-left: 1.5em" id="section-7.1-2.2">
            <p id="section-7.1-2.2.1">production<a href="#section-7.1-2.2.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-7.1-2.3">Version compatibility:</dt>
          <dd style="margin-left: 1.5em" id="section-7.1-2.4">
            <p id="section-7.1-2.4.1">draft-ietf-core-dns-over-coap-13<a href="#section-7.1-2.4.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-7.1-2.5">License:</dt>
          <dd style="margin-left: 1.5em" id="section-7.1-2.6">
            <p id="section-7.1-2.6.1">LGPL-2.1<a href="#section-7.1-2.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-7.1-2.7">Contact information:</dt>
          <dd style="margin-left: 1.5em" id="section-7.1-2.8">
            <p id="section-7.1-2.8.1"><code>Martine S. Lenders &lt;martine.lenders@tu-dresden.de&gt;</code><a href="#section-7.1-2.8.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-7.1-2.9">Last update of this information:</dt>
          <dd style="margin-left: 1.5em" id="section-7.1-2.10">
            <p id="section-7.1-2.10.1">September 2024<a href="#section-7.1-2.10.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="doc-server">
<section id="section-7.2">
        <h3 id="name-doc-server">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-doc-server" class="section-name selfRef">DoC Server</a>
        </h3>
<p id="section-7.2-1">The authors of this document provide a <a href="https://github.com/anr-bmbf-pivot/aiodnsprox">DoC server implementation in
Python</a>.<a href="#section-7.2-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-7.2-2">
          <dt id="section-7.2-2.1">Level of maturity:</dt>
          <dd style="margin-left: 1.5em" id="section-7.2-2.2">
            <p id="section-7.2-2.2.1">production<a href="#section-7.2-2.2.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-7.2-2.3">Version compatibility:</dt>
          <dd style="margin-left: 1.5em" id="section-7.2-2.4">
            <p id="section-7.2-2.4.1">draft-ietf-core-dns-over-coap-13<a href="#section-7.2-2.4.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-7.2-2.5">License:</dt>
          <dd style="margin-left: 1.5em" id="section-7.2-2.6">
            <p id="section-7.2-2.6.1">MIT<a href="#section-7.2-2.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-7.2-2.7">Contact information:</dt>
          <dd style="margin-left: 1.5em" id="section-7.2-2.8">
            <p id="section-7.2-2.8.1"><code>Martine S. Lenders &lt;martine.lenders@tu-dresden.de&gt;</code><a href="#section-7.2-2.8.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-7.2-2.9">Last update of this information:</dt>
          <dd style="margin-left: 1.5em" id="section-7.2-2.10">
            <p id="section-7.2-2.10.1">September 2024<a href="#section-7.2-2.10.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
<div id="security-considerations">
<section id="section-8">
      <h2 id="name-security-considerations">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-8-1">General CoAP security considerations (<span>[<a href="#RFC7252" class="cite xref">RFC7252</a>], <a href="https://rfc-editor.org/rfc/rfc7252#section-11" class="relref">Section 11</a></span>) apply to DoC.
DoC also inherits the security considerations of the protocols used for secure communication, e.g., OSCORE (<span>[<a href="#RFC8613" class="cite xref">RFC8613</a>], <a href="https://rfc-editor.org/rfc/rfc8613#section-12" class="relref">Section 12</a></span>) or DTLS (<span>[<a href="#RFC6347" class="cite xref">RFC6347</a>], <a href="https://rfc-editor.org/rfc/rfc6347#section-5" class="relref">Section 5</a></span> and <span>[<a href="#RFC9147" class="cite xref">RFC9147</a>], <a href="https://rfc-editor.org/rfc/rfc9147#section-11" class="relref">Section 11</a></span>).
Additionally, DoC uses request patterns that require the maintenance of long-lived security
contexts.
<span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-corr-clar-02#section-2.6" class="relref">Section 2.6</a> of [<a href="#I-D.ietf-core-corr-clar" class="cite xref">I-D.ietf-core-corr-clar</a>]</span> provides insights on what can be done when those are resumed from a new endpoint.<a href="#section-8-1" class="pilcrow">¶</a></p>
<p id="section-8-2">Though DTLS v1.2 <span>[<a href="#RFC6347" class="cite xref">RFC6347</a>]</span> was obsoleteted by DTLS v1.3 <span>[<a href="#RFC9147" class="cite xref">RFC9147</a>]</span> there are still many CoAP
implementations that still use v1.2 at the time of writing.
As such, this document also accounts for the usage of DTLS v1.2 even though newer versions are
<span class="bcp14">RECOMMENDED</span> when using DTLS to secure CoAP.<a href="#section-8-2" class="pilcrow">¶</a></p>
<p id="section-8-3">When using unprotected CoAP (see <a href="#sec_unprotected-coap" class="auto internal xref">Section 6</a>), setting the ID of a DNS message to 0 as
specified in <a href="#sec_req-caching" class="auto internal xref">Section 4.2.2</a> opens the DNS cache of a DoC client to cache poisoning attacks
via response spoofing.
This document requires an unpredictable CoAP token in each DoC query from the client when CoAP is
not secured to mitigate such an attack over DoC (see <a href="#sec_unprotected-coap" class="auto internal xref">Section 6</a>).<a href="#section-8-3" class="pilcrow">¶</a></p>
<p id="section-8-4">For secure communication via DTLS or OSCORE, the impact of a fixed ID on security is limited, as both
harden against injecting spoofed responses.
Consequently, the ID of the DNS message can be set to 0 without any concern in order to leverage the advantages of CoAP caching.<a href="#section-8-4" class="pilcrow">¶</a></p>
<p id="section-8-5">A DoC client must be aware that the DoC server
may communicate unprotected with the upstream DNS infrastructure, e.g., using DNS over UDP.
DoC can only guarantee confidentiality and integrity of communication between parties for which the
security context is exchanged.
The DoC server may use another security context to communicate upstream with both confidentiality and integrity
(e.g., DNS over QUIC <span>[<a href="#RFC9250" class="cite xref">RFC9250</a>]</span>), but, while recommended, this is opaque to the DoC client on the protocol level.
Record integrity can also be ensured upstream using, e.g., DNSSEC <span>[<a href="#BCP237" class="cite xref">BCP237</a>]</span>.<a href="#section-8-5" class="pilcrow">¶</a></p>
<p id="section-8-6">A DoC client may not be able to perform DNSSEC validation,
e.g., due to code size constraints, or due to the size of the responses.
It may trust its DoC server to perform DNSSEC validation;
how that trust is expressed is out of the scope of this document.
For instance, a DoC client may be, configured to use a particular credential by which it recognizes an eligible DoC server.
That information can also imply trust in the DNSSEC validation by that DoC server.<a href="#section-8-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-9">
      <h2 id="name-iana-considerations">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-9-1"><span class="cref" id="replace-xxxx">RFC Ed.: throughout this section, please replace
RFC-XXXX with the RFC number of this specification and remove this
note.</span><a href="#section-9-1" class="pilcrow">¶</a></p>
<p id="section-9-2">This document has the following actions for IANA.<a href="#section-9-2" class="pilcrow">¶</a></p>
<div id="coap-content-formats-registry">
<section id="section-9.1">
        <h3 id="name-coap-content-formats-regist">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-coap-content-formats-regist" class="section-name selfRef">CoAP Content-Formats Registry</a>
        </h3>
<p id="section-9.1-1">IANA is requested to assign a CoAP Content-Format ID for the "application/dns-message" media
type in the "CoAP Content-Formats" registry, within the "Constrained RESTful Environments (CoRE) Parameters"
registry group <span>[<a href="#RFC7252" class="cite xref">RFC7252</a>]</span>, corresponding to the "application/dns-message" media
type from the "Media Types" registry (see <span>[<a href="#RFC8484" class="cite xref">RFC8484</a>]</span>).<a href="#section-9.1-1" class="pilcrow">¶</a></p>
<p id="section-9.1-2">Content Type: application/dns-message<a href="#section-9.1-2" class="pilcrow">¶</a></p>
<p id="section-9.1-3">Content Coding: -<a href="#section-9.1-3" class="pilcrow">¶</a></p>
<p id="section-9.1-4">ID: 553 (suggested)<a href="#section-9.1-4" class="pilcrow">¶</a></p>
<p id="section-9.1-5">Reference: <span>[<a href="#RFC8484" class="cite xref">RFC8484</a>]</span> and [RFC-XXXX], <a href="#sec_content-format" class="auto internal xref">Section 4.1</a><a href="#section-9.1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="dns-service-bindings-svcb-registry">
<section id="section-9.2">
        <h3 id="name-dns-service-bindings-svcb-r">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-dns-service-bindings-svcb-r" class="section-name selfRef">DNS Service Bindings (SVCB) Registry</a>
        </h3>
<p id="section-9.2-1">IANA is requested to add the following entry to the "Service Parameter Keys (SvcParamKeys)" registry within the "DNS Service Bindings (SVCB)" registry group.
The definition of this parameter can be found in <a href="#sec_doc-server-selection" class="auto internal xref">Section 3</a>.<a href="#section-9.2-1" class="pilcrow">¶</a></p>
<span id="name-values-for-svcparamkeys"></span><div id="tab-svc-param-keys">
<table class="center" id="table-1">
          <caption>
<a href="#table-1" class="selfRef">Table 1</a>:
<a href="#name-values-for-svcparamkeys" class="selfRef">Values for SvcParamKeys</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Number</th>
              <th class="text-left" rowspan="1" colspan="1">Name</th>
              <th class="text-left" rowspan="1" colspan="1">Meaning</th>
              <th class="text-left" rowspan="1" colspan="1">Change Controller</th>
              <th class="text-left" rowspan="1" colspan="1">Reference</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">10 (suggested)</td>
              <td class="text-left" rowspan="1" colspan="1">docpath</td>
              <td class="text-left" rowspan="1" colspan="1">DNS over CoAP resource path</td>
              <td class="text-left" rowspan="1" colspan="1">IETF</td>
              <td class="text-left" rowspan="1" colspan="1">[RFC-XXXX], <a href="#sec_doc-server-selection" class="auto internal xref">Section 3</a>
</td>
            </tr>
          </tbody>
        </table>
</div>
</section>
</div>
<div id="resource-type-rt-link-target-attribute-values-registry">
<section id="section-9.3">
        <h3 id="name-resource-type-rt-link-targe">
<a href="#section-9.3" class="section-number selfRef">9.3. </a><a href="#name-resource-type-rt-link-targe" class="section-name selfRef">Resource Type (rt=) Link Target Attribute Values Registry</a>
        </h3>
<p id="section-9.3-1">IANA is requested to add a new Resource Type (rt=) Link Target Attribute "core.dns" to the "Resource Type (rt=) Link Target Attribute Values" registry within the "Constrained RESTful Environments (CoRE) Parameters" registry group.<a href="#section-9.3-1" class="pilcrow">¶</a></p>
<p id="section-9.3-2">Value: core.dns<a href="#section-9.3-2" class="pilcrow">¶</a></p>
<p id="section-9.3-3">Description: DNS over CoAP resource.<a href="#section-9.3-3" class="pilcrow">¶</a></p>
<p id="section-9.3-4">Reference: [RFC-XXXX], <a href="#sec_doc-server-selection" class="auto internal xref">Section 3</a><a href="#section-9.3-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sec-combined-references">
<section id="section-10">
      <h2 id="name-references">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<div id="sec-normative-references">
<section id="section-10.1">
        <h3 id="name-normative-references">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-core-coap-dtls-alpn">[I-D.ietf-core-coap-dtls-alpn]</dt>
        <dd>
<span class="refAuthor">Lenders, M. S.</span>, <span class="refAuthor">Amsüss, C.</span>, <span class="refAuthor">Schmidt, T. C.</span>, and <span class="refAuthor">M. Wählisch</span>, <span class="refTitle">"ALPN ID Specification for CoAP over DTLS"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-core-coap-dtls-alpn-05</span>, <time datetime="2025-08-11" class="refDate">11 August 2025</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-coap-dtls-alpn-05">https://datatracker.ietf.org/doc/html/draft-ietf-core-coap-dtls-alpn-05</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3986">[RFC3986]</dt>
        <dd>
<span class="refAuthor">Berners-Lee, T.</span>, <span class="refAuthor">Fielding, R.</span>, and <span class="refAuthor">L. Masinter</span>, <span class="refTitle">"Uniform Resource Identifier (URI): Generic Syntax"</span>, <span class="seriesInfo">STD 66</span>, <span class="seriesInfo">RFC 3986</span>, <span class="seriesInfo">DOI 10.17487/RFC3986</span>, <time datetime="2005-01" class="refDate">January 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc3986">https://www.rfc-editor.org/rfc/rfc3986</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5234">[RFC5234]</dt>
        <dd>
<span class="refAuthor">Crocker, D., Ed.</span> and <span class="refAuthor">P. Overell</span>, <span class="refTitle">"Augmented BNF for Syntax Specifications: ABNF"</span>, <span class="seriesInfo">STD 68</span>, <span class="seriesInfo">RFC 5234</span>, <span class="seriesInfo">DOI 10.17487/RFC5234</span>, <time datetime="2008-01" class="refDate">January 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc5234">https://www.rfc-editor.org/rfc/rfc5234</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6347">[RFC6347]</dt>
        <dd>
<span class="refAuthor">Rescorla, E.</span> and <span class="refAuthor">N. Modadugu</span>, <span class="refTitle">"Datagram Transport Layer Security Version 1.2"</span>, <span class="seriesInfo">RFC 6347</span>, <span class="seriesInfo">DOI 10.17487/RFC6347</span>, <time datetime="2012-01" class="refDate">January 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6347">https://www.rfc-editor.org/rfc/rfc6347</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7252">[RFC7252]</dt>
        <dd>
<span class="refAuthor">Shelby, Z.</span>, <span class="refAuthor">Hartke, K.</span>, and <span class="refAuthor">C. Bormann</span>, <span class="refTitle">"The Constrained Application Protocol (CoAP)"</span>, <span class="seriesInfo">RFC 7252</span>, <span class="seriesInfo">DOI 10.17487/RFC7252</span>, <time datetime="2014-06" class="refDate">June 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7252">https://www.rfc-editor.org/rfc/rfc7252</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7641">[RFC7641]</dt>
        <dd>
<span class="refAuthor">Hartke, K.</span>, <span class="refTitle">"Observing Resources in the Constrained Application Protocol (CoAP)"</span>, <span class="seriesInfo">RFC 7641</span>, <span class="seriesInfo">DOI 10.17487/RFC7641</span>, <time datetime="2015-09" class="refDate">September 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7641">https://www.rfc-editor.org/rfc/rfc7641</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7959">[RFC7959]</dt>
        <dd>
<span class="refAuthor">Bormann, C.</span> and <span class="refAuthor">Z. Shelby, Ed.</span>, <span class="refTitle">"Block-Wise Transfers in the Constrained Application Protocol (CoAP)"</span>, <span class="seriesInfo">RFC 7959</span>, <span class="seriesInfo">DOI 10.17487/RFC7959</span>, <time datetime="2016-08" class="refDate">August 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7959">https://www.rfc-editor.org/rfc/rfc7959</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8132">[RFC8132]</dt>
        <dd>
<span class="refAuthor">van der Stok, P.</span>, <span class="refAuthor">Bormann, C.</span>, and <span class="refAuthor">A. Sehgal</span>, <span class="refTitle">"PATCH and FETCH Methods for the Constrained Application Protocol (CoAP)"</span>, <span class="seriesInfo">RFC 8132</span>, <span class="seriesInfo">DOI 10.17487/RFC8132</span>, <time datetime="2017-04" class="refDate">April 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8132">https://www.rfc-editor.org/rfc/rfc8132</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8323">[RFC8323]</dt>
        <dd>
<span class="refAuthor">Bormann, C.</span>, <span class="refAuthor">Lemay, S.</span>, <span class="refAuthor">Tschofenig, H.</span>, <span class="refAuthor">Hartke, K.</span>, <span class="refAuthor">Silverajan, B.</span>, and <span class="refAuthor">B. Raymor, Ed.</span>, <span class="refTitle">"CoAP (Constrained Application Protocol) over TCP, TLS, and WebSockets"</span>, <span class="seriesInfo">RFC 8323</span>, <span class="seriesInfo">DOI 10.17487/RFC8323</span>, <time datetime="2018-02" class="refDate">February 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8323">https://www.rfc-editor.org/rfc/rfc8323</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8484">[RFC8484]</dt>
        <dd>
<span class="refAuthor">Hoffman, P.</span> and <span class="refAuthor">P. McManus</span>, <span class="refTitle">"DNS Queries over HTTPS (DoH)"</span>, <span class="seriesInfo">RFC 8484</span>, <span class="seriesInfo">DOI 10.17487/RFC8484</span>, <time datetime="2018-10" class="refDate">October 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8484">https://www.rfc-editor.org/rfc/rfc8484</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8613">[RFC8613]</dt>
        <dd>
<span class="refAuthor">Selander, G.</span>, <span class="refAuthor">Mattsson, J.</span>, <span class="refAuthor">Palombini, F.</span>, and <span class="refAuthor">L. Seitz</span>, <span class="refTitle">"Object Security for Constrained RESTful Environments (OSCORE)"</span>, <span class="seriesInfo">RFC 8613</span>, <span class="seriesInfo">DOI 10.17487/RFC8613</span>, <time datetime="2019-07" class="refDate">July 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8613">https://www.rfc-editor.org/rfc/rfc8613</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8765">[RFC8765]</dt>
        <dd>
<span class="refAuthor">Pusateri, T.</span> and <span class="refAuthor">S. Cheshire</span>, <span class="refTitle">"DNS Push Notifications"</span>, <span class="seriesInfo">RFC 8765</span>, <span class="seriesInfo">DOI 10.17487/RFC8765</span>, <time datetime="2020-06" class="refDate">June 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8765">https://www.rfc-editor.org/rfc/rfc8765</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8949">[RFC8949]</dt>
        <dd>
<span class="refAuthor">Bormann, C.</span> and <span class="refAuthor">P. Hoffman</span>, <span class="refTitle">"Concise Binary Object Representation (CBOR)"</span>, <span class="seriesInfo">STD 94</span>, <span class="seriesInfo">RFC 8949</span>, <span class="seriesInfo">DOI 10.17487/RFC8949</span>, <time datetime="2020-12" class="refDate">December 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8949">https://www.rfc-editor.org/rfc/rfc8949</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9147">[RFC9147]</dt>
        <dd>
<span class="refAuthor">Rescorla, E.</span>, <span class="refAuthor">Tschofenig, H.</span>, and <span class="refAuthor">N. Modadugu</span>, <span class="refTitle">"The Datagram Transport Layer Security (DTLS) Protocol Version 1.3"</span>, <span class="seriesInfo">RFC 9147</span>, <span class="seriesInfo">DOI 10.17487/RFC9147</span>, <time datetime="2022-04" class="refDate">April 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9147">https://www.rfc-editor.org/rfc/rfc9147</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="STD13">[STD13]</dt>
      <dd>
<div class="refInstance">Internet Standard 13, <span>&lt;<a href="https://www.rfc-editor.org/info/std13">https://www.rfc-editor.org/info/std13</a>&gt;</span>.<br><span>At the time of writing, this STD comprises the following:</span>
</div>
<div class="refInstance" id="RFC1034">
            <span class="refAuthor">Mockapetris, P.</span>, <span class="refTitle">"Domain names - concepts and facilities"</span>, <span class="seriesInfo">STD 13</span>, <span class="seriesInfo">RFC 1034</span>, <span class="seriesInfo">DOI 10.17487/RFC1034</span>, <time datetime="1987-11" class="refDate">November 1987</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc1034">https://www.rfc-editor.org/info/rfc1034</a>&gt;</span>. </div>
<div class="refInstance" id="RFC1035">
            <span class="refAuthor">Mockapetris, P.</span>, <span class="refTitle">"Domain names - implementation and specification"</span>, <span class="seriesInfo">STD 13</span>, <span class="seriesInfo">RFC 1035</span>, <span class="seriesInfo">DOI 10.17487/RFC1035</span>, <time datetime="1987-11" class="refDate">November 1987</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc1035">https://www.rfc-editor.org/info/rfc1035</a>&gt;</span>. </div>
</dd>
<dd class="break"></dd>
</dl>
</section>
</div>
<div id="sec-informative-references">
<section id="section-10.2">
        <h3 id="name-informative-references">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="BCP219">[BCP219]</dt>
        <dd>
<div class="refInstance">Best Current Practice 219, <span>&lt;<a href="https://www.rfc-editor.org/info/bcp219">https://www.rfc-editor.org/info/bcp219</a>&gt;</span>.<br><span>At the time of writing, this BCP comprises the following:</span>
</div>
<div class="refInstance" id="RFC9499">
            <span class="refAuthor">Hoffman, P.</span> and <span class="refAuthor">K. Fujiwara</span>, <span class="refTitle">"DNS Terminology"</span>, <span class="seriesInfo">BCP 219</span>, <span class="seriesInfo">RFC 9499</span>, <span class="seriesInfo">DOI 10.17487/RFC9499</span>, <time datetime="2024-03" class="refDate">March 2024</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9499">https://www.rfc-editor.org/info/rfc9499</a>&gt;</span>. </div>
</dd>
<dd class="break"></dd>
<dt id="BCP237">[BCP237]</dt>
        <dd>
<div class="refInstance">Best Current Practice 237, <span>&lt;<a href="https://www.rfc-editor.org/info/bcp237">https://www.rfc-editor.org/info/bcp237</a>&gt;</span>.<br><span>At the time of writing, this BCP comprises the following:</span>
</div>
<div class="refInstance" id="RFC9364">
            <span class="refAuthor">Hoffman, P.</span>, <span class="refTitle">"DNS Security Extensions (DNSSEC)"</span>, <span class="seriesInfo">BCP 237</span>, <span class="seriesInfo">RFC 9364</span>, <span class="seriesInfo">DOI 10.17487/RFC9364</span>, <time datetime="2023-02" class="refDate">February 2023</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9364">https://www.rfc-editor.org/info/rfc9364</a>&gt;</span>. </div>
</dd>
<dd class="break"></dd>
<dt id="DoC-paper">[DoC-paper]</dt>
        <dd>
<span class="refAuthor">Lenders, M.</span>, <span class="refAuthor">Amsüss, C.</span>, <span class="refAuthor">Gündogan, C.</span>, <span class="refAuthor">Nawrocki, M.</span>, <span class="refAuthor">Schmidt, T.</span>, and <span class="refAuthor">M. Wählisch</span>, <span class="refTitle">"Securing Name Resolution in the IoT: DNS over CoAP"</span>, <span class="refContent">Association for Computing Machinery (ACM)</span>, <span class="seriesInfo">Proceedings of the ACM on Networking vol. 1, no. CoNEXT2, pp. 1-25</span>, <span class="seriesInfo">DOI 10.1145/3609423</span>, <time datetime="2023-09" class="refDate">September 2023</time>, <span>&lt;<a href="https://doi.org/10.1145/3609423">https://doi.org/10.1145/3609423</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.amsuess-core-cachable-oscore">[I-D.amsuess-core-cachable-oscore]</dt>
        <dd>
<span class="refAuthor">Amsüss, C.</span> and <span class="refAuthor">M. Tiloca</span>, <span class="refTitle">"Cacheable OSCORE"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-amsuess-core-cachable-oscore-11</span>, <time datetime="2025-07-06" class="refDate">6 July 2025</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-amsuess-core-cachable-oscore-11">https://datatracker.ietf.org/doc/html/draft-amsuess-core-cachable-oscore-11</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-core-corr-clar">[I-D.ietf-core-corr-clar]</dt>
        <dd>
<span class="refAuthor">Bormann, C.</span>, <span class="refTitle">"Constrained Application Protocol (CoAP): Corrections and Clarifications"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-core-corr-clar-02</span>, <time datetime="2025-06-20" class="refDate">20 June 2025</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-corr-clar-02">https://datatracker.ietf.org/doc/html/draft-ietf-core-corr-clar-02</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-core-href">[I-D.ietf-core-href]</dt>
        <dd>
<span class="refAuthor">Bormann, C.</span> and <span class="refAuthor">H. Birkholz</span>, <span class="refTitle">"Constrained Resource Identifiers"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-core-href-23</span>, <time datetime="2025-07-07" class="refDate">7 July 2025</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-href-23">https://datatracker.ietf.org/doc/html/draft-ietf-core-href-23</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-core-transport-indication">[I-D.ietf-core-transport-indication]</dt>
        <dd>
<span class="refAuthor">Amsüss, C.</span> and <span class="refAuthor">M. S. Lenders</span>, <span class="refTitle">"CoAP Transport Indication"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-core-transport-indication-09</span>, <time datetime="2025-07-07" class="refDate">7 July 2025</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-transport-indication-09">https://datatracker.ietf.org/doc/html/draft-ietf-core-transport-indication-09</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-iotops-7228bis">[I-D.ietf-iotops-7228bis]</dt>
        <dd>
<span class="refAuthor">Bormann, C.</span>, <span class="refAuthor">Ersue, M.</span>, <span class="refAuthor">Keränen, A.</span>, and <span class="refAuthor">C. Gomez</span>, <span class="refTitle">"Terminology for Constrained-Node Networks"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-iotops-7228bis-02</span>, <time datetime="2025-07-07" class="refDate">7 July 2025</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-iotops-7228bis-02">https://datatracker.ietf.org/doc/html/draft-ietf-iotops-7228bis-02</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.lenders-core-dnr">[I-D.lenders-core-dnr]</dt>
        <dd>
<span class="refAuthor">Lenders, M. S.</span>, <span class="refAuthor">Amsüss, C.</span>, <span class="refAuthor">Schmidt, T. C.</span>, and <span class="refAuthor">M. Wählisch</span>, <span class="refTitle">"Discovery of Network-designated OSCORE-based Resolvers: Problem Statement"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-lenders-core-dnr-06</span>, <time datetime="2025-07-07" class="refDate">7 July 2025</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-lenders-core-dnr-06">https://datatracker.ietf.org/doc/html/draft-lenders-core-dnr-06</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="REST">[REST]</dt>
        <dd>
<span class="refAuthor">Fielding, R.</span>, <span class="refTitle">"Architectural Styles and the Design of Network-based Software Architectures"</span>, <span class="seriesInfo">Ph.D. Dissertation, University of California, Irvine</span>, <time datetime="2000" class="refDate">2000</time>, <span>&lt;<a href="https://www.ics.uci.edu/~fielding/pubs/dissertation/fielding_dissertation.pdf">https://www.ics.uci.edu/~fielding/pubs/dissertation/fielding_dissertation.pdf</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3833">[RFC3833]</dt>
        <dd>
<span class="refAuthor">Atkins, D.</span> and <span class="refAuthor">R. Austein</span>, <span class="refTitle">"Threat Analysis of the Domain Name System (DNS)"</span>, <span class="seriesInfo">RFC 3833</span>, <span class="seriesInfo">DOI 10.17487/RFC3833</span>, <time datetime="2004-08" class="refDate">August 2004</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc3833">https://www.rfc-editor.org/rfc/rfc3833</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6690">[RFC6690]</dt>
        <dd>
<span class="refAuthor">Shelby, Z.</span>, <span class="refTitle">"Constrained RESTful Environments (CoRE) Link Format"</span>, <span class="seriesInfo">RFC 6690</span>, <span class="seriesInfo">DOI 10.17487/RFC6690</span>, <time datetime="2012-08" class="refDate">August 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6690">https://www.rfc-editor.org/rfc/rfc6690</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7228">[RFC7228]</dt>
        <dd>
<span class="refAuthor">Bormann, C.</span>, <span class="refAuthor">Ersue, M.</span>, and <span class="refAuthor">A. Keranen</span>, <span class="refTitle">"Terminology for Constrained-Node Networks"</span>, <span class="seriesInfo">RFC 7228</span>, <span class="seriesInfo">DOI 10.17487/RFC7228</span>, <time datetime="2014-05" class="refDate">May 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7228">https://www.rfc-editor.org/rfc/rfc7228</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7942">[RFC7942]</dt>
        <dd>
<span class="refAuthor">Sheffer, Y.</span> and <span class="refAuthor">A. Farrel</span>, <span class="refTitle">"Improving Awareness of Running Code: The Implementation Status Section"</span>, <span class="seriesInfo">BCP 205</span>, <span class="seriesInfo">RFC 7942</span>, <span class="seriesInfo">DOI 10.17487/RFC7942</span>, <time datetime="2016-07" class="refDate">July 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7942">https://www.rfc-editor.org/rfc/rfc7942</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8094">[RFC8094]</dt>
        <dd>
<span class="refAuthor">Reddy, T.</span>, <span class="refAuthor">Wing, D.</span>, and <span class="refAuthor">P. Patil</span>, <span class="refTitle">"DNS over Datagram Transport Layer Security (DTLS)"</span>, <span class="seriesInfo">RFC 8094</span>, <span class="seriesInfo">DOI 10.17487/RFC8094</span>, <time datetime="2017-02" class="refDate">February 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8094">https://www.rfc-editor.org/rfc/rfc8094</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8446">[RFC8446]</dt>
        <dd>
<span class="refAuthor">Rescorla, E.</span>, <span class="refTitle">"The Transport Layer Security (TLS) Protocol Version 1.3"</span>, <span class="seriesInfo">RFC 8446</span>, <span class="seriesInfo">DOI 10.17487/RFC8446</span>, <time datetime="2018-08" class="refDate">August 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8446">https://www.rfc-editor.org/rfc/rfc8446</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9052">[RFC9052]</dt>
        <dd>
<span class="refAuthor">Schaad, J.</span>, <span class="refTitle">"CBOR Object Signing and Encryption (COSE): Structures and Process"</span>, <span class="seriesInfo">STD 96</span>, <span class="seriesInfo">RFC 9052</span>, <span class="seriesInfo">DOI 10.17487/RFC9052</span>, <time datetime="2022-08" class="refDate">August 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9052">https://www.rfc-editor.org/rfc/rfc9052</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9076">[RFC9076]</dt>
        <dd>
<span class="refAuthor">Wicinski, T., Ed.</span>, <span class="refTitle">"DNS Privacy Considerations"</span>, <span class="seriesInfo">RFC 9076</span>, <span class="seriesInfo">DOI 10.17487/RFC9076</span>, <time datetime="2021-07" class="refDate">July 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9076">https://www.rfc-editor.org/rfc/rfc9076</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9176">[RFC9176]</dt>
        <dd>
<span class="refAuthor">Amsüss, C., Ed.</span>, <span class="refAuthor">Shelby, Z.</span>, <span class="refAuthor">Koster, M.</span>, <span class="refAuthor">Bormann, C.</span>, and <span class="refAuthor">P. van der Stok</span>, <span class="refTitle">"Constrained RESTful Environments (CoRE) Resource Directory"</span>, <span class="seriesInfo">RFC 9176</span>, <span class="seriesInfo">DOI 10.17487/RFC9176</span>, <time datetime="2022-04" class="refDate">April 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9176">https://www.rfc-editor.org/rfc/rfc9176</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9250">[RFC9250]</dt>
        <dd>
<span class="refAuthor">Huitema, C.</span>, <span class="refAuthor">Dickinson, S.</span>, and <span class="refAuthor">A. Mankin</span>, <span class="refTitle">"DNS over Dedicated QUIC Connections"</span>, <span class="seriesInfo">RFC 9250</span>, <span class="seriesInfo">DOI 10.17487/RFC9250</span>, <time datetime="2022-05" class="refDate">May 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9250">https://www.rfc-editor.org/rfc/rfc9250</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9460">[RFC9460]</dt>
        <dd>
<span class="refAuthor">Schwartz, B.</span>, <span class="refAuthor">Bishop, M.</span>, and <span class="refAuthor">E. Nygren</span>, <span class="refTitle">"Service Binding and Parameter Specification via the DNS (SVCB and HTTPS Resource Records)"</span>, <span class="seriesInfo">RFC 9460</span>, <span class="seriesInfo">DOI 10.17487/RFC9460</span>, <time datetime="2023-11" class="refDate">November 2023</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9460">https://www.rfc-editor.org/rfc/rfc9460</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9461">[RFC9461]</dt>
        <dd>
<span class="refAuthor">Schwartz, B.</span>, <span class="refTitle">"Service Binding Mapping for DNS Servers"</span>, <span class="seriesInfo">RFC 9461</span>, <span class="seriesInfo">DOI 10.17487/RFC9461</span>, <time datetime="2023-11" class="refDate">November 2023</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9461">https://www.rfc-editor.org/rfc/rfc9461</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9462">[RFC9462]</dt>
        <dd>
<span class="refAuthor">Pauly, T.</span>, <span class="refAuthor">Kinnear, E.</span>, <span class="refAuthor">Wood, C. A.</span>, <span class="refAuthor">McManus, P.</span>, and <span class="refAuthor">T. Jensen</span>, <span class="refTitle">"Discovery of Designated Resolvers"</span>, <span class="seriesInfo">RFC 9462</span>, <span class="seriesInfo">DOI 10.17487/RFC9462</span>, <time datetime="2023-11" class="refDate">November 2023</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9462">https://www.rfc-editor.org/rfc/rfc9462</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9463">[RFC9463]</dt>
        <dd>
<span class="refAuthor">Boucadair, M., Ed.</span>, <span class="refAuthor">Reddy.K, T., Ed.</span>, <span class="refAuthor">Wing, D.</span>, <span class="refAuthor">Cook, N.</span>, and <span class="refAuthor">T. Jensen</span>, <span class="refTitle">"DHCP and Router Advertisement Options for the Discovery of Network-designated Resolvers (DNR)"</span>, <span class="seriesInfo">RFC 9463</span>, <span class="seriesInfo">DOI 10.17487/RFC9463</span>, <time datetime="2023-11" class="refDate">November 2023</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9463">https://www.rfc-editor.org/rfc/rfc9463</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9528">[RFC9528]</dt>
      <dd>
<span class="refAuthor">Selander, G.</span>, <span class="refAuthor">Preuß Mattsson, J.</span>, and <span class="refAuthor">F. Palombini</span>, <span class="refTitle">"Ephemeral Diffie-Hellman Over COSE (EDHOC)"</span>, <span class="seriesInfo">RFC 9528</span>, <span class="seriesInfo">DOI 10.17487/RFC9528</span>, <time datetime="2024-03" class="refDate">March 2024</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9528">https://www.rfc-editor.org/rfc/rfc9528</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
<div id="sec_evaluation">
<section id="appendix-A">
      <h2 id="name-evaluation">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-evaluation" class="section-name selfRef">Evaluation</a>
      </h2>
<p id="appendix-A-1">The authors of this document presented the design, implementation, and analysis of DoC in their
paper "Securing Name Resolution in the IoT: DNS over CoAP" <span>[<a href="#DoC-paper" class="cite xref">DoC-paper</a>]</span>.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="change-log">
<section id="appendix-B">
      <h2 id="name-change-log">
<a href="#appendix-B" class="section-number selfRef">Appendix B. </a><a href="#name-change-log" class="section-name selfRef">Change Log</a>
      </h2>
<p id="appendix-B-1"><span class="cref" id="remove-changelog">RFC Ed.: Please remove this section before publication.</span><a href="#appendix-B-1" class="pilcrow">¶</a></p>
<div id="since-draft-ietf-core-dns-over-coap-16">
<section id="appendix-B.1">
        <h3 id="name-since-draft-ietf-core-dns-o">
<a href="#appendix-B.1" class="section-number selfRef">B.1. </a><a href="#name-since-draft-ietf-core-dns-o" class="section-name selfRef">Since <a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-dns-over-coap-16">draft-ietf-core-dns-over-coap-16</a></a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.1-1.1">
            <p id="appendix-B.1-1.1.1">Mention TLS as possible protection mechanism in abstract and intro<a href="#appendix-B.1-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.1-1.2">
            <p id="appendix-B.1-1.2.1">Fix representation format in the docpath examples<a href="#appendix-B.1-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.1-1.3">
            <p id="appendix-B.1-1.3.1">Make docpath wire-format paragraph easier to parse<a href="#appendix-B.1-1.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-core-dns-over-coap-15">
<section id="appendix-B.2">
        <h3 id="name-since-draft-ietf-core-dns-ov">
<a href="#appendix-B.2" class="section-number selfRef">B.2. </a><a href="#name-since-draft-ietf-core-dns-ov" class="section-name selfRef">Since <a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-dns-over-coap-15">draft-ietf-core-dns-over-coap-15</a></a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.2-1.1">
            <p id="appendix-B.2-1.1.1">Address Genart and Artart review:<a href="#appendix-B.2-1.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-B.2-1.1.2.1">
                <p id="appendix-B.2-1.1.2.1.1">Add editor's note about removing RFC7228 reference in case rfc7228bis comes out before
publication<a href="#appendix-B.2-1.1.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-B.2-1.1.2.2">
                <p id="appendix-B.2-1.1.2.2.1">Address minor nits<a href="#appendix-B.2-1.1.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-B.2-1.1.2.3">
                <p id="appendix-B.2-1.1.2.3.1">Resolve less well-known abbreviations<a href="#appendix-B.2-1.1.2.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-B.2-1.1.2.4">
                <p id="appendix-B.2-1.1.2.4.1">Name default ports for "coap" and "co"<a href="#appendix-B.2-1.1.2.4.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-B.2-1.1.2.5">
                <p id="appendix-B.2-1.1.2.5.1">Add reasoning why we also consider DTLS v1.2 (RFC 6347)<a href="#appendix-B.2-1.1.2.5.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-B.2-1.1.2.6">
                <p id="appendix-B.2-1.1.2.6.1">Add illustrative reference for ETag generation<a href="#appendix-B.2-1.1.2.6.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="normal" id="appendix-B.2-1.2">
            <p id="appendix-B.2-1.2.1">Address DNS SVCB SvcParamKeys IANA expert review:<a href="#appendix-B.2-1.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-B.2-1.2.2.1">
                <p id="appendix-B.2-1.2.2.1.1">docpath: clarifications and examples<a href="#appendix-B.2-1.2.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-B.2-1.2.2.2">
                <p id="appendix-B.2-1.2.2.2.1">Rework representation format and wire-format of "docpath"<a href="#appendix-B.2-1.2.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-B.2-1.2.2.3">
                <p id="appendix-B.2-1.2.2.3.1">State that we don't do the full SVCB mapping<a href="#appendix-B.2-1.2.2.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-B.2-1.2.2.4">
                <p id="appendix-B.2-1.2.2.4.1">Explicitly do not limit what port= can do.<a href="#appendix-B.2-1.2.2.4.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-B.2-1.2.2.5">
                <p id="appendix-B.2-1.2.2.5.1">port limitations: We're not the SVCB mapping document<a href="#appendix-B.2-1.2.2.5.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="normal" id="appendix-B.2-1.3">
            <p id="appendix-B.2-1.3.1">Address Tsvart Review<a href="#appendix-B.2-1.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-B.2-1.3.2.1">
                <p id="appendix-B.2-1.3.2.1.1">Prefer ADN for Uri-Host; don't prescribe <em>how</em> it is set<a href="#appendix-B.2-1.3.2.1.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-core-dns-over-coap-14">
<section id="appendix-B.3">
        <h3 id="name-since-draft-ietf-core-dns-ove">
<a href="#appendix-B.3" class="section-number selfRef">B.3. </a><a href="#name-since-draft-ietf-core-dns-ove" class="section-name selfRef">Since <a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-dns-over-coap-14">draft-ietf-core-dns-over-coap-14</a></a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.3-1.1">
            <p id="appendix-B.3-1.1.1">Remove superfluous and confusing step in SVCB to request algorithm<a href="#appendix-B.3-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.3-1.2">
            <p id="appendix-B.3-1.2.1">Address AD review:<a href="#appendix-B.3-1.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-B.3-1.2.2.1">
                <p id="appendix-B.3-1.2.2.1.1">Remove RFC8949 as CBOR diagnostic notation reference<a href="#appendix-B.3-1.2.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-B.3-1.2.2.2">
                <p id="appendix-B.3-1.2.2.2.1">CoRE-specific FETCH method -&gt; CoAP-specific FETCH method<a href="#appendix-B.3-1.2.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-B.3-1.2.2.3">
                <p id="appendix-B.3-1.2.2.3.1">Remove double reference to BCP 219<a href="#appendix-B.3-1.2.2.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-B.3-1.2.2.4">
                <p id="appendix-B.3-1.2.2.4.1">Fix wording and references around SVCB records and ALPN<a href="#appendix-B.3-1.2.2.4.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-B.3-1.2.2.5">
                <p id="appendix-B.3-1.2.2.5.1">Move format description for examples to Terminology section<a href="#appendix-B.3-1.2.2.5.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-B.3-1.2.2.6">
                <p id="appendix-B.3-1.2.2.6.1">Retitle section 5 to "Interaction with other CoAP and CoRE Features"<a href="#appendix-B.3-1.2.2.6.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-B.3-1.2.2.7">
                <p id="appendix-B.3-1.2.2.7.1">Make prevention of poisoning attacks normative for unprotected CoAP<a href="#appendix-B.3-1.2.2.7.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-B.3-1.2.2.8">
                <p id="appendix-B.3-1.2.2.8.1">Provide specs on if the <span class="bcp14">SHOULD</span> on ID=0 does not apply<a href="#appendix-B.3-1.2.2.8.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-B.3-1.2.2.9">
                <p id="appendix-B.3-1.2.2.9.1">Make construction algorithm normative<a href="#appendix-B.3-1.2.2.9.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-B.3-1.2.2.10">
                <p id="appendix-B.3-1.2.2.10.1">Add definition for CoRE<a href="#appendix-B.3-1.2.2.10.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-B.3-1.2.2.11">
                <p id="appendix-B.3-1.2.2.11.1">General grammar, wording, and spelling cleanups<a href="#appendix-B.3-1.2.2.11.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-core-dns-over-coap-13">
<section id="appendix-B.4">
        <h3 id="name-since-draft-ietf-core-dns-over">
<a href="#appendix-B.4" class="section-number selfRef">B.4. </a><a href="#name-since-draft-ietf-core-dns-over" class="section-name selfRef">Since <a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-dns-over-coap-13">draft-ietf-core-dns-over-coap-13</a></a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.4-1.1">
            <p id="appendix-B.4-1.1.1">Address shepherd review<a href="#appendix-B.4-1.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-core-dns-over-coap-12">
<section id="appendix-B.5">
        <h3 id="name-since-draft-ietf-core-dns-over-">
<a href="#appendix-B.5" class="section-number selfRef">B.5. </a><a href="#name-since-draft-ietf-core-dns-over-" class="section-name selfRef">Since <a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-dns-over-coap-12">draft-ietf-core-dns-over-coap-12</a></a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.5-1.1">
            <p id="appendix-B.5-1.1.1">Address Esko's review<a href="#appendix-B.5-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.5-1.2">
            <p id="appendix-B.5-1.2.1">Address Marcos's review<a href="#appendix-B.5-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.5-1.3">
            <p id="appendix-B.5-1.3.1">Address Mikolai's review<a href="#appendix-B.5-1.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-core-dns-over-coap-10">
<section id="appendix-B.6">
        <h3 id="name-since-draft-ietf-core-dns-over-c">
<a href="#appendix-B.6" class="section-number selfRef">B.6. </a><a href="#name-since-draft-ietf-core-dns-over-c" class="section-name selfRef">Since <a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-dns-over-coap-10">draft-ietf-core-dns-over-coap-10</a></a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.6-1.1">
            <p id="appendix-B.6-1.1.1">Replace imprecise or wrong terms:<a href="#appendix-B.6-1.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-B.6-1.1.2.1">
                <p id="appendix-B.6-1.1.2.1.1">disjunct =&gt; distinct<a href="#appendix-B.6-1.1.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-B.6-1.1.2.2">
                <p id="appendix-B.6-1.1.2.2.1">unencrypted CoAP =&gt; unprotected CoAP<a href="#appendix-B.6-1.1.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-B.6-1.1.2.3">
                <p id="appendix-B.6-1.1.2.3.1">security mode =&gt; confidential communication<a href="#appendix-B.6-1.1.2.3.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="normal" id="appendix-B.6-1.2">
            <p id="appendix-B.6-1.2.1">Pull in definition of CBOR sequences and their EDN<a href="#appendix-B.6-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.6-1.3">
            <p id="appendix-B.6-1.3.1">Fix broken external section references<a href="#appendix-B.6-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.6-1.4">
            <p id="appendix-B.6-1.4.1">Define terminology for "upstream DNS infrastructure" and "upstream DNS server"<a href="#appendix-B.6-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.6-1.5">
            <p id="appendix-B.6-1.5.1">Fix wording on DNS error handling<a href="#appendix-B.6-1.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.6-1.6">
            <p id="appendix-B.6-1.6.1">Clarify that any OpCode beyond 0 is not supported for now and remove now redundant DNS Upgrade
section as a consequence<a href="#appendix-B.6-1.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.6-1.7">
            <p id="appendix-B.6-1.7.1">Clarify that the DoC/DoH mapping is what is <span class="bcp14">NOT RECOMMENDED</span><a href="#appendix-B.6-1.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.6-1.8">
            <p id="appendix-B.6-1.8.1">Avoid use of undefined term “CoAP resource identifier”<a href="#appendix-B.6-1.8.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.6-1.9">
            <p id="appendix-B.6-1.9.1">Discuss Max-Age option value in an error case<a href="#appendix-B.6-1.9.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.6-1.10">
            <p id="appendix-B.6-1.10.1">Add human-readable format to examples<a href="#appendix-B.6-1.10.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.6-1.11">
            <p id="appendix-B.6-1.11.1">General language check pass<a href="#appendix-B.6-1.11.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-core-dns-over-coap-09">
<section id="appendix-B.7">
        <h3 id="name-since-draft-ietf-core-dns-over-co">
<a href="#appendix-B.7" class="section-number selfRef">B.7. </a><a href="#name-since-draft-ietf-core-dns-over-co" class="section-name selfRef">Since <a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-dns-over-coap-09">draft-ietf-core-dns-over-coap-09</a></a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.7-1.1">
            <p id="appendix-B.7-1.1.1">Update SVCB SvcParamKey<a href="#appendix-B.7-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.7-1.2">
            <p id="appendix-B.7-1.2.1">Update corr-clar reference<a href="#appendix-B.7-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.7-1.3">
            <p id="appendix-B.7-1.3.1">Add reference to DNS Update <a href="https://datatracker.ietf.org/doc/html/rfc2136">[RFC2136]</a>, clarify that it is currently not considered<a href="#appendix-B.7-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.7-1.4">
            <p id="appendix-B.7-1.4.1">Add to security considerations: unprotected upstream DNS and DNSSEC<a href="#appendix-B.7-1.4.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-core-dns-over-coap-08">
<section id="appendix-B.8">
        <h3 id="name-since-draft-ietf-core-dns-over-coa">
<a href="#appendix-B.8" class="section-number selfRef">B.8. </a><a href="#name-since-draft-ietf-core-dns-over-coa" class="section-name selfRef">Since <a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-dns-over-coap-08">draft-ietf-core-dns-over-coap-08</a></a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.8-1.1">
            <p id="appendix-B.8-1.1.1">Update Cenk's Affiliation<a href="#appendix-B.8-1.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-core-dns-over-coap-07">
<section id="appendix-B.9">
        <h3 id="name-since-draft-ietf-core-dns-over-coap">
<a href="#appendix-B.9" class="section-number selfRef">B.9. </a><a href="#name-since-draft-ietf-core-dns-over-coap" class="section-name selfRef">Since <a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-dns-over-coap-07">draft-ietf-core-dns-over-coap-07</a></a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.9-1.1">
            <p id="appendix-B.9-1.1.1">Address IANA early review #1368678<a href="#appendix-B.9-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.9-1.2">
            <p id="appendix-B.9-1.2.1">Update normative reference to CoAP over DTLS alpn SvcParam<a href="#appendix-B.9-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.9-1.3">
            <p id="appendix-B.9-1.3.1">Add missing DTLSv1.2 reference<a href="#appendix-B.9-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.9-1.4">
            <p id="appendix-B.9-1.4.1">Security considerations: Point into corr-clar-future<a href="#appendix-B.9-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.9-1.5">
            <p id="appendix-B.9-1.5.1">Implementation Status: Update to current version<a href="#appendix-B.9-1.5.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-core-dns-over-coap-06">
<section id="appendix-B.10">
        <h3 id="name-since-draft-ietf-core-dns-over-coap-2">
<a href="#appendix-B.10" class="section-number selfRef">B.10. </a><a href="#name-since-draft-ietf-core-dns-over-coap-2" class="section-name selfRef">Since <a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-dns-over-coap-06">draft-ietf-core-dns-over-coap-06</a></a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.10-1.1">
            <p id="appendix-B.10-1.1.1">Add "docpath" SVCB ParamKey definition<a href="#appendix-B.10-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.10-1.2">
            <p id="appendix-B.10-1.2.1">IANA fixes<a href="#appendix-B.10-1.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-B.10-1.2.2.1">
                <p id="appendix-B.10-1.2.2.1.1">Use new column names (see Errata 4954)<a href="#appendix-B.10-1.2.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-B.10-1.2.2.2">
                <p id="appendix-B.10-1.2.2.2.1">Add reference to RFC 8484 for application/dns-message Media Type<a href="#appendix-B.10-1.2.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-B.10-1.2.2.3">
                <p id="appendix-B.10-1.2.2.3.1">IANA: unify self references<a href="#appendix-B.10-1.2.2.3.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-core-dns-over-coap-05">
<section id="appendix-B.11">
        <h3 id="name-since-draft-ietf-core-dns-over-coap-3">
<a href="#appendix-B.11" class="section-number selfRef">B.11. </a><a href="#name-since-draft-ietf-core-dns-over-coap-3" class="section-name selfRef">Since <a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-dns-over-coap-05">draft-ietf-core-dns-over-coap-05</a></a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.11-1.1">
            <p id="appendix-B.11-1.1.1">Add references to relevant SVCB/DNR RFCs and drafts<a href="#appendix-B.11-1.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-core-dns-over-coap-04">
<section id="appendix-B.12">
        <h3 id="name-since-draft-ietf-core-dns-over-coap-4">
<a href="#appendix-B.12" class="section-number selfRef">B.12. </a><a href="#name-since-draft-ietf-core-dns-over-coap-4" class="section-name selfRef">Since <a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-dns-over-coap-04">draft-ietf-core-dns-over-coap-04</a></a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.12-1.1">
            <p id="appendix-B.12-1.1.1">Add note on cacheable OSCORE<a href="#appendix-B.12-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.12-1.2">
            <p id="appendix-B.12-1.2.1">Address early IANA review<a href="#appendix-B.12-1.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-core-dns-over-coap-03">
<section id="appendix-B.13">
        <h3 id="name-since-draft-ietf-core-dns-over-coap-5">
<a href="#appendix-B.13" class="section-number selfRef">B.13. </a><a href="#name-since-draft-ietf-core-dns-over-coap-5" class="section-name selfRef">Since <a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-dns-over-coap-03">draft-ietf-core-dns-over-coap-03</a></a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.13-1.1">
            <p id="appendix-B.13-1.1.1">Amended Introduction with short contextualization of constrained environments<a href="#appendix-B.13-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.13-1.2">
            <p id="appendix-B.13-1.2.1">Add <a href="#sec_evaluation" class="auto internal xref">Appendix A</a> on evaluation<a href="#appendix-B.13-1.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-core-dns-over-coap-02">
<section id="appendix-B.14">
        <h3 id="name-since-draft-ietf-core-dns-over-coap-6">
<a href="#appendix-B.14" class="section-number selfRef">B.14. </a><a href="#name-since-draft-ietf-core-dns-over-coap-6" class="section-name selfRef">Since <a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-dns-over-coap-02">draft-ietf-core-dns-over-coap-02</a></a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.14-1.1">
            <p id="appendix-B.14-1.1.1">Move implementation details to Implementation Status (in accordance with <span>[<a href="#RFC7942" class="cite xref">RFC7942</a>]</span>)<a href="#appendix-B.14-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.14-1.2">
            <p id="appendix-B.14-1.2.1">Recommend root path to keep the CoAP options small<a href="#appendix-B.14-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.14-1.3">
            <p id="appendix-B.14-1.3.1">Set Content-Format for application/dns-message to 553<a href="#appendix-B.14-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.14-1.4">
            <p id="appendix-B.14-1.4.1">SVCB/DNR: Move to Server Selection Section but leave TBD based on DNSOP discussion for now<a href="#appendix-B.14-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.14-1.5">
            <p id="appendix-B.14-1.5.1">Clarify that DoC and DoH are distinct<a href="#appendix-B.14-1.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.14-1.6">
            <p id="appendix-B.14-1.6.1">Clarify mapping between DoC and DoH<a href="#appendix-B.14-1.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.14-1.7">
            <p id="appendix-B.14-1.7.1">Update considerations on unprotected use<a href="#appendix-B.14-1.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.14-1.8">
            <p id="appendix-B.14-1.8.1">Don't call OSCORE end-to-end encrypted<a href="#appendix-B.14-1.8.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-core-dns-over-coap-01">
<section id="appendix-B.15">
        <h3 id="name-since-draft-ietf-core-dns-over-coap-7">
<a href="#appendix-B.15" class="section-number selfRef">B.15. </a><a href="#name-since-draft-ietf-core-dns-over-coap-7" class="section-name selfRef">Since <a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-dns-over-coap-01">draft-ietf-core-dns-over-coap-01</a></a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.15-1.1">
            <p id="appendix-B.15-1.1.1">Specify DoC server role in terms of DNS terminology<a href="#appendix-B.15-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.15-1.2">
            <p id="appendix-B.15-1.2.1">Clarify communication of DoC to DNS infrastructure is agnostic of the transport<a href="#appendix-B.15-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.15-1.3">
            <p id="appendix-B.15-1.3.1">Add subsection on how to implement DNS Push in DoC<a href="#appendix-B.15-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.15-1.4">
            <p id="appendix-B.15-1.4.1">Add appendix on reference implementation<a href="#appendix-B.15-1.4.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-core-dns-over-coap-00">
<section id="appendix-B.16">
        <h3 id="name-since-draft-ietf-core-dns-over-coap-8">
<a href="#appendix-B.16" class="section-number selfRef">B.16. </a><a href="#name-since-draft-ietf-core-dns-over-coap-8" class="section-name selfRef">Since <a href="https://datatracker.ietf.org/doc/html/draft-ietf-core-dns-over-coap-00">draft-ietf-core-dns-over-coap-00</a></a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.16-1.1">
            <p id="appendix-B.16-1.1.1">SVGify ASCII art<a href="#appendix-B.16-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.16-1.2">
            <p id="appendix-B.16-1.2.1">Move section on "DoC Server Considerations" (was Section 5.1) to its own draft
(<a href="https://datatracker.ietf.org/doc/draft-lenders-dns-cns/">draft-lenders-dns-cns</a>)<a href="#appendix-B.16-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.16-1.3">
            <p id="appendix-B.16-1.3.1">Replace layer violating statement for CON with statement of fact<a href="#appendix-B.16-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.16-1.4">
            <p id="appendix-B.16-1.4.1">Add security considerations on ID=0<a href="#appendix-B.16-1.4.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-lenders-dns-over-coap-04">
<section id="appendix-B.17">
        <h3 id="name-since-draft-lenders-dns-ove">
<a href="#appendix-B.17" class="section-number selfRef">B.17. </a><a href="#name-since-draft-lenders-dns-ove" class="section-name selfRef">Since <a href="https://datatracker.ietf.org/doc/html/draft-lenders-dns-over-coap-04">draft-lenders-dns-over-coap-04</a></a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.17-1.1">
            <p id="appendix-B.17-1.1.1">Removed change log of draft-lenders-dns-over-coap<a href="#appendix-B.17-1.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="acknowledgments">
<section id="appendix-C">
      <h2 id="name-acknowledgments">
<a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="appendix-C-1">The authors of this document want to thank Mike Bishop, Carsten Bormann, Elwyn B. Davies, Esko Dijk, Thomas Fossati, Mikolai Gütschow, Todd Herr, Tommy Pauly, Ben Schwartz, Marco Tiloca, and Tim Wicinski for their feedback and comments.<a href="#appendix-C-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-D">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Martine Sophie Lenders</span></div>
<div dir="auto" class="left"><span class="org">TUD Dresden University of Technology</span></div>
<div dir="auto" class="left"><span class="street-address">Helmholtzstr. 10</span></div>
<div dir="auto" class="left">
<span class="postal-code">D-01069</span> <span class="locality">Dresden</span>
</div>
<div dir="auto" class="left"><span class="country-name">Germany</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:martine.lenders@tu-dresden.de" class="email">martine.lenders@tu-dresden.de</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Christian Amsüss</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:christian@amsuess.com" class="email">christian@amsuess.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Cenk Gündoğan</span></div>
<div dir="auto" class="left"><span class="org">NeuralAgent GmbH</span></div>
<div dir="auto" class="left"><span class="street-address">Mies-van-der-Rohe-Straße 6</span></div>
<div dir="auto" class="left">
<span class="postal-code">D-80807</span> <span class="locality">Munich</span>
</div>
<div dir="auto" class="left"><span class="country-name">Germany</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:cenk.gundogan@neuralagent.ai" class="email">cenk.gundogan@neuralagent.ai</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Thomas C. Schmidt</span></div>
<div dir="auto" class="left"><span class="org">HAW Hamburg</span></div>
<div dir="auto" class="left"><span class="street-address">Berliner Tor 7</span></div>
<div dir="auto" class="left">
<span class="postal-code">D-20099</span> <span class="locality">Hamburg</span>
</div>
<div dir="auto" class="left"><span class="country-name">Germany</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:t.schmidt@haw-hamburg.de" class="email">t.schmidt@haw-hamburg.de</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Matthias Wählisch</span></div>
<div dir="auto" class="left"><span class="org">TUD Dresden University of Technology &amp; Barkhausen Institut</span></div>
<div dir="auto" class="left"><span class="street-address">Helmholtzstr. 10</span></div>
<div dir="auto" class="left">
<span class="postal-code">D-01069</span> <span class="locality">Dresden</span>
</div>
<div dir="auto" class="left"><span class="country-name">Germany</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:m.waehlisch@tu-dresden.de" class="email">m.waehlisch@tu-dresden.de</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
